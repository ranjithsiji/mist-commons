import{r as $,c as et,w as Ce,o as Le,a as kt,b as D,d as M,e as u,f as G,g as te,h as Te,v as tt,i as we,j as De,F as Se,k as $e,l as ge,t as S,n as me,m as je,p as Ct,q as nt,s as Lt,u as Mt,x as ue,y as ee,z as Dt}from"./vendor-Dl05hrV1.js";import{r as Pt,g as Ot}from"./maps-zdHhRoWp.js";import{C as X,r as Tt,a as St}from"./charts-DRebCC0V.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();const $t="/assets/mistlogo-DSRNHEp1.svg",Be=(s,e)=>{const t=s.__vccOpts||s;for(const[n,a]of e)t[n]=a;return t},Et={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50"},Nt={class:"bg-white/90 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50"},It={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Bt={class:"flex justify-between items-center h-16"},Ft={class:"md:hidden"},zt={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ut={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Ht={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},At={key:0,class:"md:hidden border-t border-gray-200 py-4"},Yt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Wt={class:"mb-16 animate-fade-in"},qt={class:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-gray-100 p-6 max-w-3xl mx-auto"},jt={class:"relative"},Gt={class:"flex flex-col md:flex-row gap-3"},Rt={class:"flex-1 relative"},Zt=["onKeydown"],Vt={key:0,class:"absolute right-4 top-1/2 transform -translate-y-1/2"},Qt={key:1,class:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Xt=["onClick","onMouseenter"],Kt={class:"font-medium"},Jt=["disabled"],en={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tn={key:1,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},nn={key:0,class:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},rn={class:"flex items-center justify-between"},sn={class:"flex items-center text-sm text-blue-700"},on=["href"],an={class:"mt-1 text-xs text-blue-600 font-mono break-all"},ln={key:0,class:"bg-red-50 border-l-4 border-red-400 text-red-700 p-6 rounded-lg mb-8 max-w-3xl mx-auto shadow-lg animate-slide-up"},un={class:"flex items-center"},dn={class:"font-medium"},cn={key:1,class:"text-center py-20 animate-fade-in"},hn={key:2,class:"animate-slide-up"},fn={class:"text-center mb-12"},mn={class:"text-gray-600 text-lg"},pn={class:"space-y-6"},gn=["onClick"],_n={class:"flex items-center p-6"},yn=["src","alt","onError"],vn={key:1,class:"text-2xl"},wn={class:"flex-1 min-w-0"},bn={class:"flex items-start justify-between"},xn={class:"flex-1"},kn={class:"text-xl font-bold text-gray-800 mb-2 group-hover:text-wikimedia-blue transition-colors duration-300"},Cn={class:"text-gray-600 text-sm mb-3 line-clamp-2 leading-relaxed"},Ln={class:"flex items-center space-x-3"},Mn={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700"},Dn={key:3,class:"text-center py-20 animate-fade-in"},Pn={__name:"CoverPage",props:{categories:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["select","custom"],setup(s,{emit:e}){const t=e,n=$(!1),a=$(""),r=$([]),i=$(!1),o=$(!1),l=$(-1),c=$(""),h=$(null);let d=null;const m=x=>x&&(x.startsWith("http://")||x.startsWith("https://")),f=(x,v)=>{console.warn(`Failed to load image icon for category ${v.name}:`,x.target.src),x.target.style.display="none";const O=x.target.parentElement;if(O){O.style.background=`linear-gradient(135deg, ${v.color1||"#0645ad"} 0%, ${v.color2||"#00af89"} 100%)`;const q=document.createElement("span");q.className="text-2xl",q.textContent="ðŸ“Š",O.appendChild(q)}},p=x=>x.replace(/^Category:/i,"").replace(/\s+/g,"_"),g=et(()=>{if(!a.value.trim())return null;let x=a.value.trim();return`https://commons.wikimedia.org/wiki/Category:${p(x)}`});Ce(()=>new URLSearchParams(window.location.search).get("category"),x=>{if(x&&!a.value){const O=decodeURIComponent(x).replace(/^Category:/i,"");a.value=O.replace(/_/g," ")}},{immediate:!0});const _=()=>{const x=a.value.trim();if(x.length<3){i.value=!1,r.value=[];return}d&&clearTimeout(d),d=setTimeout(()=>{y(x)},300)},y=async x=>{if(!(!x||x.length<3)){o.value=!0,c.value="";try{let v=x;v.toLowerCase().startsWith("category:")||(v=`Category:${x}`);const O="https://commons.wikimedia.org/w/api.php",q=new URLSearchParams({action:"query",format:"json",origin:"*",list:"search",srnamespace:"14",srsearch:v,srlimit:"10",srprop:"size|wordcount|timestamp",formatversion:"2"}),j=await fetch(`${O}?${q}`);if(!j.ok)throw new Error(`HTTP ${j.status}: ${j.statusText}`);const k=await j.json();if(k.error)throw new Error(k.error.info||"API Error");if(k.query&&k.query.search&&k.query.search.length>0){const b=k.query.search.map(B=>B.title);await P(b)}else r.value=[],i.value=!1}catch(v){console.error("Category search error:",v),c.value=`Failed to search categories: ${v.message}`,r.value=[],i.value=!1}finally{o.value=!1}}},P=async x=>{try{const v="https://commons.wikimedia.org/w/api.php",O=new URLSearchParams({action:"query",format:"json",origin:"*",titles:x.join("|"),prop:"categoryinfo",formatversion:"2"}),j=await(await fetch(`${v}?${O}`)).json();j.query&&j.query.pages&&(r.value=j.query.pages.filter(k=>!k.missing),i.value=r.value.length>0,l.value=-1)}catch(v){console.error("Category info error:",v)}},E=x=>{!i.value||r.value.length===0||(l.value+=x,l.value<-1?l.value=r.value.length-1:l.value>=r.value.length&&(l.value=-1))},R=()=>{l.value>=0&&l.value<r.value.length?W(r.value[l.value]):a.value.trim()&&C()},W=x=>{a.value=x.title,i.value=!1,r.value=[],l.value=-1,Ct(()=>{h.value&&h.value.focus()})},F=()=>{i.value=!1,l.value=-1},C=()=>{const x=a.value.trim();if(!x)return;const v=p(x),O={id:`custom-${Date.now()}`,name:v,slug:v,categoryName:v,description:`Custom analysis for ${x.replace(/^Category:/i,"")}`,icon:"ðŸ”",year:"Custom",color1:"#8B5CF6",color2:"#7C3AED",isCustom:!0};console.log("Creating custom category:",O),F(),t("custom",O)},w=x=>{x.target.closest(".relative")||F()};return Le(()=>{document.addEventListener("click",w)}),kt(()=>{document.removeEventListener("click",w),d&&clearTimeout(d)}),(x,v)=>(M(),D("div",Et,[u("header",Nt,[u("div",It,[u("div",Bt,[v[5]||(v[5]=te('<div class="flex items-center space-x-4" data-v-7e70ddf0><div class="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-wikimedia-blue to-wikimedia-green rounded-lg" data-v-7e70ddf0><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24" data-v-7e70ddf0><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" data-v-7e70ddf0></path></svg></div><div data-v-7e70ddf0><h1 class="text-xl font-bold text-gray-900" data-v-7e70ddf0>MIST : Analytics</h1><p class="text-sm text-gray-500 hidden sm:block" data-v-7e70ddf0>Media Statistics and Analytics Dashboard for Campaigns</p></div></div><nav class="hidden md:flex items-center space-x-8" data-v-7e70ddf0><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200" data-v-7e70ddf0>Home</a><a href="https://w.wiki/t9" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200" data-v-7e70ddf0>Wikimedians of Kerala</a><a href="https://gitlab.wikimedia.org/toolforge-repos/mist-tool" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200" data-v-7e70ddf0>Gitlab</a><a href="https://commons.wikimedia.org" target="_blank" rel="noopener noreferrer" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200" data-v-7e70ddf0>Wikimedia Commons</a></nav>',2)),u("div",Ft,[u("button",{onClick:v[0]||(v[0]=O=>n.value=!n.value),class:"text-gray-700 hover:text-wikimedia-blue p-2"},[(M(),D("svg",zt,[n.value?(M(),D("path",Ht)):(M(),D("path",Ut))]))])])]),n.value?(M(),D("div",At,[...v[6]||(v[6]=[te('<nav class="flex flex-col space-y-2" data-v-7e70ddf0><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200" data-v-7e70ddf0>Home</a><a href="https://w.wiki/t9" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200" data-v-7e70ddf0>Wikimedians of Kerala</a><a href="https://gitlab.wikimedia.org/toolforge-repos/mist-tool" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200" data-v-7e70ddf0>Gitlab</a><a href="https://commons.wikimedia.org" target="_blank" rel="noopener noreferrer" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200" data-v-7e70ddf0>Wikimedia Commons</a></nav>',1)])])):G("",!0)])]),u("main",Yt,[v[18]||(v[18]=te('<div class="text-center mb-4 animate-fade-in" data-v-7e70ddf0><div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-6 mb-4" data-v-7e70ddf0><div class="flex-shrink-0" data-v-7e70ddf0><div class="w-20 h-20 md:w-24 md:h-24 lg:w-28 lg:h-28 transition-transform duration-300 hover:scale-105" data-v-7e70ddf0><img src="'+$t+'" alt="MIST Logo" class="w-full h-full object-contain drop-shadow-lg" data-v-7e70ddf0></div></div><div class="flex-1" data-v-7e70ddf0><h2 class="text-3xl md:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-wikimedia-blue via-wikimedia-green to-wikimedia-blue bg-clip-text text-transparent leading-tight" data-v-7e70ddf0> Wikimedia Commons Analytics </h2></div></div><p class="text-lg md:text-xl text-gray-600 mb-1 max-w-3xl mx-auto leading-relaxed" data-v-7e70ddf0> View Statistics of a Wikimedia Commons photography campaign </p></div>',1)),u("div",Wt,[u("div",qt,[v[12]||(v[12]=u("div",{class:"text-center mb-4"},[u("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Category of Campaign"),u("p",{class:"text-gray-600"},"Search for any Wikimedia Commons category of a campaign to analyze")],-1)),u("div",jt,[u("div",Gt,[u("div",Rt,[Te(u("input",{ref_key:"categoryInput",ref:h,"onUpdate:modelValue":v[1]||(v[1]=O=>a.value=O),onInput:_,onKeydown:[v[2]||(v[2]=we(De(O=>E(1),["prevent"]),["down"])),v[3]||(v[3]=we(De(O=>E(-1),["prevent"]),["up"])),we(De(R,["prevent"]),["enter"]),we(F,["escape"])],onFocus:v[4]||(v[4]=O=>i.value=a.value.length>=3),type:"text",placeholder:"Type category name:",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-wikimedia-blue focus:border-transparent transition-all duration-200 text-gray-900 placeholder-gray-500"},null,40,Zt),[[tt,a.value]]),o.value?(M(),D("div",Vt,[...v[7]||(v[7]=[u("div",{class:"w-5 h-5 border-2 border-wikimedia-blue/20 border-t-wikimedia-blue rounded-full animate-spin"},null,-1)])])):G("",!0),i.value&&r.value.length>0?(M(),D("div",Qt,[(M(!0),D(Se,null,$e(r.value,(O,q)=>(M(),D("div",{key:O.title,onClick:j=>W(O),onMouseenter:j=>l.value=q,class:me(["px-4 py-3 cursor-pointer transition-colors duration-150 border-b border-gray-100 last:border-b-0",l.value===q?"bg-wikimedia-blue text-white":"hover:bg-gray-50 text-gray-900"])},[u("div",Kt,S(O.title.replace("Category:","")),1),O.categoryinfo&&O.categoryinfo.pages?(M(),D("div",{key:0,class:me(["text-sm mt-1",l.value===q?"text-blue-100":"text-gray-500"])},S(O.categoryinfo.pages)+" pages ",3)):G("",!0),u("div",{class:me(["text-xs mt-1 flex items-center",l.value===q?"text-blue-200":"text-gray-400"])},[v[8]||(v[8]=u("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)),ge(" commons.wikimedia.org/wiki/"+S(O.title.replace(" ","_")),1)],2)],42,Xt))),128))])):G("",!0)]),u("button",{onClick:C,disabled:!a.value.trim()||o.value,class:"px-6 py-3 bg-gradient-to-r from-wikimedia-blue to-wikimedia-green text-white rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-medium"},[o.value?(M(),D("svg",en,[...v[9]||(v[9]=[u("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),u("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(M(),D("svg",tn,[...v[10]||(v[10]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])])),ge(" "+S(o.value?"Searching...":"View Statistics"),1)],8,Jt)]),g.value?(M(),D("div",nn,[u("div",rn,[u("div",sn,[v[11]||(v[11]=u("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),u("a",{href:g.value,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 text-sm font-medium hover:underline transition-colors duration-200"}," View Category on Wikimedia Commons â†’ ",8,on)])]),u("div",an," URL : "+S(g.value),1)])):G("",!0)])])]),s.error||c.value?(M(),D("div",ln,[u("div",un,[v[13]||(v[13]=u("svg",{class:"w-6 h-6 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[u("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),u("span",dn,S(s.error||c.value),1)])])):G("",!0),s.loading?(M(),D("div",cn,[...v[14]||(v[14]=[te('<div class="relative inline-block" data-v-7e70ddf0><div class="w-16 h-16 border-4 border-wikimedia-blue/20 border-t-wikimedia-blue rounded-full animate-spin" data-v-7e70ddf0></div><div class="absolute inset-0 w-16 h-16 border-4 border-transparent border-r-wikimedia-green rounded-full animate-spin" style="animation-delay:-0.5s;animation-direction:reverse;" data-v-7e70ddf0></div></div><p class="mt-6 text-xl text-gray-600 font-medium" data-v-7e70ddf0>Loading categories...</p><p class="mt-2 text-gray-500" data-v-7e70ddf0>Fetching contest data from Wikimedia Commons</p>',3)])])):s.categories.length>0?(M(),D("div",hn,[u("div",fn,[v[15]||(v[15]=u("h3",{class:"text-3xl font-bold text-gray-800 mb-3"},"Featured Contest Categories",-1)),u("p",mn,S(s.categories.length)+" contest"+S(s.categories.length!==1?"s":"")+" available for analysis",1)]),u("div",pn,[(M(!0),D(Se,null,$e(s.categories,(O,q)=>(M(),D("div",{key:O.id,onClick:j=>x.$emit("select",O),class:"group bg-white/80 backdrop-blur-sm rounded-xl shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:-translate-y-1 border border-gray-100 overflow-hidden",style:je({animationDelay:`${q*100}ms`})},[u("div",_n,[u("div",{class:"flex items-center justify-center w-16 h-16 rounded-lg mr-6 flex-shrink-0 group-hover:scale-110 transition-transform duration-300 overflow-hidden",style:je({background:m(O.icon)?"transparent":`linear-gradient(135deg, ${O.color1||"#0645ad"} 0%, ${O.color2||"#00af89"} 100%)`})},[m(O.icon)?(M(),D("img",{key:0,src:O.icon,alt:O.name,class:"w-full h-full object-cover rounded-lg",onError:j=>f(j,O)},null,40,yn)):(M(),D("span",vn,S(O.icon||"ðŸ“Š"),1))],4),u("div",wn,[u("div",bn,[u("div",xn,[u("h3",kn,S(O.name),1),u("p",Cn,S(O.description),1),u("div",Ln,[u("span",Mn,S(O.year||"Contest"),1),v[16]||(v[16]=u("div",{class:"flex items-center text-wikimedia-blue font-medium text-sm group-hover:translate-x-1 transition-transform duration-300"},[u("span",{class:"mr-1"},"View Analytics"),u("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})])],-1))])])])])])],12,gn))),128))])])):s.loading?G("",!0):(M(),D("div",Dn,[...v[17]||(v[17]=[te('<div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6" data-v-7e70ddf0><svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7e70ddf0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-7e70ddf0></path></svg></div><h3 class="text-xl font-semibold text-gray-700 mb-2" data-v-7e70ddf0>No Categories Available</h3><p class="text-gray-500" data-v-7e70ddf0>No contest categories found. Use the custom search above to find categories.</p>',3)])])),v[19]||(v[19]=te('<footer class="text-center mt-20 pt-12 border-t border-gray-200 animate-fade-in" data-v-7e70ddf0><div class="flex items-center justify-center space-x-8 mb-6" data-v-7e70ddf0><div class="flex items-center space-x-2 text-gray-600" data-v-7e70ddf0><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-7e70ddf0><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" data-v-7e70ddf0></path></svg><a href="https://wikitech.wikimedia.org/wiki/Portal:Toolforge" target="_blank" data-v-7e70ddf0><span class="font-medium" data-v-7e70ddf0>Wikimedia Toolforge</span></a></div><div class="flex items-center space-x-2 text-gray-600" data-v-7e70ddf0><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-7e70ddf0><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" data-v-7e70ddf0></path></svg><a href="https://hay.toolforge.org/directory/" target="_blank" data-v-7e70ddf0><span class="font-medium" data-v-7e70ddf0>Tools Directory</span></a></div><div class="flex items-center space-x-2 text-gray-600" data-v-7e70ddf0><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-7e70ddf0><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" data-v-7e70ddf0></path></svg><a href="https://w.wiki/t9" target="_blank" data-v-7e70ddf0><span class="font-medium" data-v-7e70ddf0>Wikimedians of Kerala</span></a></div></div><p class="text-gray-500 text-sm mb-2" data-v-7e70ddf0> Powered by <a href="https://commons.wikimedia.org/" target="_blank" data-v-7e70ddf0></a><span class="font-semibold text-wikimedia-blue" data-v-7e70ddf0>Wikimedia Commons API</span> â€¢ Built with <a href="https://vuejs.org/" target="_blank" data-v-7e70ddf0><span class="font-semibold text-wikimedia-green" data-v-7e70ddf0>Vue.js</span></a> &amp; <a href="https://tailwindcss.com/" target="_blank" data-v-7e70ddf0><span class="font-semibold text-wikimedia-purple" data-v-7e70ddf0>TailwindCSS</span></a></p><p class="text-gray-400 text-xs" data-v-7e70ddf0> Analyzing media contributions from the world&#39;s largest free media repository </p></footer>',1))])]))}},On=Be(Pn,[["__scopeId","data-v-7e70ddf0"]]),Tn={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 mb-8"},Sn={class:"bg-white rounded-lg shadow p-6"},$n={class:"flex items-center justify-between"},En={class:"text-3xl font-bold text-blue-600"},Nn={class:"bg-white rounded-lg shadow p-6"},In={class:"flex items-center justify-between"},Bn={class:"text-3xl font-bold text-green-600"},Fn={class:"bg-white rounded-lg shadow p-6"},zn={class:"flex items-center justify-between"},Un={class:"text-3xl font-bold text-purple-600"},Hn={class:"bg-white rounded-lg shadow p-6"},An={class:"flex items-center justify-between"},Yn={class:"text-2xl font-bold text-orange-600"},Wn={class:"bg-white rounded-lg shadow p-6"},qn={class:"flex items-center justify-between"},jn={class:"text-2xl font-bold text-pink-600"},Gn={class:"bg-white rounded-lg shadow p-6"},Rn={class:"flex items-center justify-between"},Zn={class:"text-3xl font-bold text-cyan-600"},Vn={__name:"StatsCards",props:{stats:{type:Object,required:!0}},setup(s){const e=t=>{if(!t||t===0)return"0 Bytes";const n=1024,a=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(n));return Math.round(t/Math.pow(n,r)*100)/100+" "+a[r]};return(t,n)=>(M(),D("div",Tn,[u("div",Sn,[u("div",$n,[u("div",null,[n[0]||(n[0]=u("p",{class:"text-gray-600 text-md"},"Contributors",-1)),u("p",En,S(s.stats.uniqueUsers),1)]),n[1]||(n[1]=u("svg",{class:"w-10 h-10 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1))])]),u("div",Nn,[u("div",In,[u("div",null,[n[2]||(n[2]=u("p",{class:"text-gray-500 text-sm"},"Total Files",-1)),u("p",Bn,S(s.stats.totalFiles),1)]),n[3]||(n[3]=u("svg",{class:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1))])]),u("div",Fn,[u("div",zn,[u("div",null,[n[4]||(n[4]=u("p",{class:"text-gray-500 text-sm"},"Active Days",-1)),u("p",Un,S(s.stats.uniqueDates),1)]),n[5]||(n[5]=u("svg",{class:"w-10 h-10 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1))])]),u("div",Hn,[u("div",An,[u("div",null,[n[6]||(n[6]=u("p",{class:"text-gray-500 text-sm"},"Total Size",-1)),u("p",Yn,S(e(s.stats.totalSize)),1)]),n[7]||(n[7]=u("svg",{class:"w-10 h-10 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})],-1))])]),u("div",Wn,[u("div",qn,[u("div",null,[n[8]||(n[8]=u("p",{class:"text-gray-500 text-sm"},"Avg File Size",-1)),u("p",jn,S(e(s.stats.avgFileSize)),1)]),n[9]||(n[9]=u("svg",{class:"w-10 h-10 text-pink-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1))])]),u("div",Gn,[u("div",Rn,[u("div",null,[n[10]||(n[10]=u("p",{class:"text-gray-500 text-sm"},"Geotagged",-1)),u("p",Zn,S(s.stats.geotaggedFiles),1)]),n[11]||(n[11]=u("svg",{class:"w-10 h-10 text-cyan-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1))])])]))}};var Qn=Pt();const K=Ot(Qn);var fe={exports:{}},Xn=fe.exports,Ge;function Kn(){return Ge||(Ge=1,(function(s,e){(function(t,n){n(e)})(Xn,function(t){var n=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(r){L.Util.setOptions(this,r),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var i=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,i?this._withAnimation:this._noAnimation),this._markerCluster=i?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(r){if(r instanceof L.LayerGroup)return this.addLayers([r]);if(!r.getLatLng)return this._nonPointGroup.addLayer(r),this.fire("layeradd",{layer:r}),this;if(!this._map)return this._needsClustering.push(r),this.fire("layeradd",{layer:r}),this;if(this.hasLayer(r))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(r,this._maxZoom),this.fire("layeradd",{layer:r}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var i=r,o=this._zoom;if(r.__parent)for(;i.__parent._zoom>=o;)i=i.__parent;return this._currentShownBounds.contains(i.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(r,i):this._animationAddLayerNonAnimated(r,i)),this},removeLayer:function(r){return r instanceof L.LayerGroup?this.removeLayers([r]):r.getLatLng?this._map?r.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(r)),this._removeLayer(r,!0),this.fire("layerremove",{layer:r}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),r.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(r)&&(this._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,r)&&this.hasLayer(r)&&this._needsRemoving.push({layer:r,latlng:r._latlng}),this.fire("layerremove",{layer:r}),this):(this._nonPointGroup.removeLayer(r),this.fire("layerremove",{layer:r}),this)},addLayers:function(r,i){if(!L.Util.isArray(r))return this.addLayer(r);var o=this._featureGroup,l=this._nonPointGroup,c=this.options.chunkedLoading,h=this.options.chunkInterval,d=this.options.chunkProgress,m=r.length,f=0,p=!0,g;if(this._map){var _=new Date().getTime(),y=L.bind(function(){var E=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();f<m;f++){if(c&&f%200===0){var R=new Date().getTime()-E;if(R>h)break}if(g=r[f],g instanceof L.LayerGroup){p&&(r=r.slice(),p=!1),this._extractNonGroupLayers(g,r),m=r.length;continue}if(!g.getLatLng){l.addLayer(g),i||this.fire("layeradd",{layer:g});continue}if(!this.hasLayer(g)&&(this._addLayer(g,this._maxZoom),i||this.fire("layeradd",{layer:g}),g.__parent&&g.__parent.getChildCount()===2)){var W=g.__parent.getAllChildMarkers(),F=W[0]===g?W[1]:W[0];o.removeLayer(F)}}d&&d(f,m,new Date().getTime()-_),f===m?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(y,this.options.chunkDelay)},this);y()}else for(var P=this._needsClustering;f<m;f++){if(g=r[f],g instanceof L.LayerGroup){p&&(r=r.slice(),p=!1),this._extractNonGroupLayers(g,r),m=r.length;continue}if(!g.getLatLng){l.addLayer(g);continue}this.hasLayer(g)||P.push(g)}return this},removeLayers:function(r){var i,o,l=r.length,c=this._featureGroup,h=this._nonPointGroup,d=!0;if(!this._map){for(i=0;i<l;i++){if(o=r[i],o instanceof L.LayerGroup){d&&(r=r.slice(),d=!1),this._extractNonGroupLayers(o,r),l=r.length;continue}this._arraySplice(this._needsClustering,o),h.removeLayer(o),this.hasLayer(o)&&this._needsRemoving.push({layer:o,latlng:o._latlng}),this.fire("layerremove",{layer:o})}return this}if(this._unspiderfy){this._unspiderfy();var m=r.slice(),f=l;for(i=0;i<f;i++){if(o=m[i],o instanceof L.LayerGroup){this._extractNonGroupLayers(o,m),f=m.length;continue}this._unspiderfyLayer(o)}}for(i=0;i<l;i++){if(o=r[i],o instanceof L.LayerGroup){d&&(r=r.slice(),d=!1),this._extractNonGroupLayers(o,r),l=r.length;continue}if(!o.__parent){h.removeLayer(o),this.fire("layerremove",{layer:o});continue}this._removeLayer(o,!0,!0),this.fire("layerremove",{layer:o}),c.hasLayer(o)&&(c.removeLayer(o),o.clusterShow&&o.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(r){r.off(this._childMarkerEventHandlers,this),delete r.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var r=new L.LatLngBounds;this._topClusterLevel&&r.extend(this._topClusterLevel._bounds);for(var i=this._needsClustering.length-1;i>=0;i--)r.extend(this._needsClustering[i].getLatLng());return r.extend(this._nonPointGroup.getBounds()),r},eachLayer:function(r,i){var o=this._needsClustering.slice(),l=this._needsRemoving,c,h,d;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),h=o.length-1;h>=0;h--){for(c=!0,d=l.length-1;d>=0;d--)if(l[d].layer===o[h]){c=!1;break}c&&r.call(i,o[h])}this._nonPointGroup.eachLayer(r,i)},getLayers:function(){var r=[];return this.eachLayer(function(i){r.push(i)}),r},getLayer:function(r){var i=null;return r=parseInt(r,10),this.eachLayer(function(o){L.stamp(o)===r&&(i=o)}),i},hasLayer:function(r){if(!r)return!1;var i,o=this._needsClustering;for(i=o.length-1;i>=0;i--)if(o[i]===r)return!0;for(o=this._needsRemoving,i=o.length-1;i>=0;i--)if(o[i].layer===r)return!1;return!!(r.__parent&&r.__parent._group===this)||this._nonPointGroup.hasLayer(r)},zoomToShowLayer:function(r,i){var o=this._map;typeof i!="function"&&(i=function(){});var l=function(){(o.hasLayer(r)||o.hasLayer(r.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",l,this),this.off("animationend",l,this),o.hasLayer(r)?i():r.__parent._icon&&(this.once("spiderfied",i,this),r.__parent.spiderfy()))};r._icon&&this._map.getBounds().contains(r.getLatLng())?i():r.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",l,this),this._map.panTo(r.getLatLng())):(this._map.on("moveend",l,this),this.on("animationend",l,this),r.__parent.zoomToBounds())},onAdd:function(r){this._map=r;var i,o,l;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(r),this._nonPointGroup.addTo(r),this._gridClusters||this._generateInitialClusters(),this._maxLat=r.options.crs.projection.MAX_LATITUDE,i=0,o=this._needsRemoving.length;i<o;i++)l=this._needsRemoving[i],l.newlatlng=l.layer._latlng,l.layer._latlng=l.latlng;for(i=0,o=this._needsRemoving.length;i<o;i++)l=this._needsRemoving[i],this._removeLayer(l.layer,!0),l.layer._latlng=l.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),o=this._needsClustering,this._needsClustering=[],this.addLayers(o,!0)},onRemove:function(r){r.off("zoomend",this._zoomEnd,this),r.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(r){for(var i=r;i&&!i._icon;)i=i.__parent;return i||null},_arraySplice:function(r,i){for(var o=r.length-1;o>=0;o--)if(r[o]===i)return r.splice(o,1),!0},_removeFromGridUnclustered:function(r,i){for(var o=this._map,l=this._gridUnclustered,c=Math.floor(this._map.getMinZoom());i>=c&&l[i].removeObject(r,o.project(r.getLatLng(),i));i--);},_childMarkerDragStart:function(r){r.target.__dragStart=r.target._latlng},_childMarkerMoved:function(r){if(!this._ignoreMove&&!r.target.__dragStart){var i=r.target._popup&&r.target._popup.isOpen();this._moveChild(r.target,r.oldLatLng,r.latlng),i&&r.target.openPopup()}},_moveChild:function(r,i,o){r._latlng=i,this.removeLayer(r),r._latlng=o,this.addLayer(r)},_childMarkerDragEnd:function(r){var i=r.target.__dragStart;delete r.target.__dragStart,i&&this._moveChild(r.target,i,r.target._latlng)},_removeLayer:function(r,i,o){var l=this._gridClusters,c=this._gridUnclustered,h=this._featureGroup,d=this._map,m=Math.floor(this._map.getMinZoom());i&&this._removeFromGridUnclustered(r,this._maxZoom);var f=r.__parent,p=f._markers,g;for(this._arraySplice(p,r);f&&(f._childCount--,f._boundsNeedUpdate=!0,!(f._zoom<m));)i&&f._childCount<=1?(g=f._markers[0]===r?f._markers[1]:f._markers[0],l[f._zoom].removeObject(f,d.project(f._cLatLng,f._zoom)),c[f._zoom].addObject(g,d.project(g.getLatLng(),f._zoom)),this._arraySplice(f.__parent._childClusters,f),f.__parent._markers.push(g),g.__parent=f.__parent,f._icon&&(h.removeLayer(f),o||h.addLayer(g))):f._iconNeedsUpdate=!0,f=f.__parent;delete r.__parent},_isOrIsParent:function(r,i){for(;i;){if(r===i)return!0;i=i.parentNode}return!1},fire:function(r,i,o){if(i&&i.layer instanceof L.MarkerCluster){if(i.originalEvent&&this._isOrIsParent(i.layer._icon,i.originalEvent.relatedTarget))return;r="cluster"+r}L.FeatureGroup.prototype.fire.call(this,r,i,o)},listens:function(r,i){return L.FeatureGroup.prototype.listens.call(this,r,i)||L.FeatureGroup.prototype.listens.call(this,"cluster"+r,i)},_defaultIconCreateFunction:function(r){var i=r.getChildCount(),o=" marker-cluster-";return i<10?o+="small":i<100?o+="medium":o+="large",new L.DivIcon({html:"<div><span>"+i+"</span></div>",className:"marker-cluster"+o,iconSize:new L.Point(40,40)})},_bindEvents:function(){var r=this._map,i=this.options.spiderfyOnMaxZoom,o=this.options.showCoverageOnHover,l=this.options.zoomToBoundsOnClick,c=this.options.spiderfyOnEveryZoom;(i||l||c)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),o&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),r.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(r){var i=r.layer,o=i;if(!(r.type==="clusterkeypress"&&r.originalEvent&&r.originalEvent.keyCode!==13)){for(;o._childClusters.length===1;)o=o._childClusters[0];o._zoom===this._maxZoom&&o._childCount===i._childCount&&this.options.spiderfyOnMaxZoom?i.spiderfy():this.options.zoomToBoundsOnClick&&i.zoomToBounds(),this.options.spiderfyOnEveryZoom&&i.spiderfy(),r.originalEvent&&r.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(r){var i=this._map;this._inZoomAnimation||(this._shownPolygon&&i.removeLayer(this._shownPolygon),r.layer.getChildCount()>2&&r.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(r.layer.getConvexHull(),this.options.polygonOptions),i.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var r=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom,c=this._map;(r||o||l)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),c.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var r=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,r),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),r),this._currentShownBounds=r}},_generateInitialClusters:function(){var r=Math.ceil(this._map.getMaxZoom()),i=Math.floor(this._map.getMinZoom()),o=this.options.maxClusterRadius,l=o;typeof o!="function"&&(l=function(){return o}),this.options.disableClusteringAtZoom!==null&&(r=this.options.disableClusteringAtZoom-1),this._maxZoom=r,this._gridClusters={},this._gridUnclustered={};for(var c=r;c>=i;c--)this._gridClusters[c]=new L.DistanceGrid(l(c)),this._gridUnclustered[c]=new L.DistanceGrid(l(c));this._topClusterLevel=new this._markerCluster(this,i-1)},_addLayer:function(r,i){var o=this._gridClusters,l=this._gridUnclustered,c=Math.floor(this._map.getMinZoom()),h,d;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(r),r.on(this._childMarkerEventHandlers,this);i>=c;i--){h=this._map.project(r.getLatLng(),i);var m=o[i].getNearObject(h);if(m){m._addChild(r),r.__parent=m;return}if(m=l[i].getNearObject(h),m){var f=m.__parent;f&&this._removeLayer(m,!1);var p=new this._markerCluster(this,i,m,r);o[i].addObject(p,this._map.project(p._cLatLng,i)),m.__parent=p,r.__parent=p;var g=p;for(d=i-1;d>f._zoom;d--)g=new this._markerCluster(this,d,g),o[d].addObject(g,this._map.project(m.getLatLng(),d));f._addChild(g),this._removeFromGridUnclustered(m,i);return}l[i].addObject(r,h)}this._topClusterLevel._addChild(r),r.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(r){r instanceof L.MarkerCluster&&r._iconNeedsUpdate&&r._updateIcon()})},_enqueue:function(r){this._queue.push(r),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var r=0;r<this._queue.length;r++)this._queue[r].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var r=Math.round(this._map._zoom);this._processQueue(),this._zoom<r&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,r)):this._zoom>r?(this._animationStart(),this._animationZoomOut(this._zoom,r)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(r){var i=this._maxLat;return i!==void 0&&(r.getNorth()>=i&&(r._northEast.lat=1/0),r.getSouth()<=-i&&(r._southWest.lat=-1/0)),r},_animationAddLayerNonAnimated:function(r,i){if(i===r)this._featureGroup.addLayer(r);else if(i._childCount===2){i._addToMap();var o=i.getAllChildMarkers();this._featureGroup.removeLayer(o[0]),this._featureGroup.removeLayer(o[1])}else i._updateIcon()},_extractNonGroupLayers:function(r,i){var o=r.getLayers(),l=0,c;for(i=i||[];l<o.length;l++){if(c=o[l],c instanceof L.LayerGroup){this._extractNonGroupLayers(c,i);continue}i.push(c)}return i},_overrideMarkerIcon:function(r){var i=r.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[r]}});return i}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(r,i){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r),this._topClusterLevel._recursivelyAddChildrenToMap(null,i,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(r,i){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r),this._topClusterLevel._recursivelyAddChildrenToMap(null,i,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(r,i){this._animationAddLayerNonAnimated(r,i)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(r,i){var o=this._getExpandedVisibleBounds(),l=this._featureGroup,c=Math.floor(this._map.getMinZoom()),h;this._ignoreMove=!0,this._topClusterLevel._recursively(o,r,c,function(d){var m=d._latlng,f=d._markers,p;for(o.contains(m)||(m=null),d._isSingleParent()&&r+1===i?(l.removeLayer(d),d._recursivelyAddChildrenToMap(null,i,o)):(d.clusterHide(),d._recursivelyAddChildrenToMap(m,i,o)),h=f.length-1;h>=0;h--)p=f[h],o.contains(p._latlng)||l.removeLayer(p)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,i),l.eachLayer(function(d){!(d instanceof L.MarkerCluster)&&d._icon&&d.clusterShow()}),this._topClusterLevel._recursively(o,r,i,function(d){d._recursivelyRestoreChildPositions(i)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,r,c,function(d){l.removeLayer(d),d.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(r,i){this._animationZoomOutSingle(this._topClusterLevel,r-1,i),this._topClusterLevel._recursivelyAddChildrenToMap(null,i,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r,this._getExpandedVisibleBounds())},_animationAddLayer:function(r,i){var o=this,l=this._featureGroup;l.addLayer(r),i!==r&&(i._childCount>2?(i._updateIcon(),this._forceLayout(),this._animationStart(),r._setPos(this._map.latLngToLayerPoint(i.getLatLng())),r.clusterHide(),this._enqueue(function(){l.removeLayer(r),r.clusterShow(),o._animationEnd()})):(this._forceLayout(),o._animationStart(),o._animationZoomOutSingle(i,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(r,i,o){var l=this._getExpandedVisibleBounds(),c=Math.floor(this._map.getMinZoom());r._recursivelyAnimateChildrenInAndAddSelfToMap(l,c,i+1,o);var h=this;this._forceLayout(),r._recursivelyBecomeVisible(l,o),this._enqueue(function(){if(r._childCount===1){var d=r._markers[0];this._ignoreMove=!0,d.setLatLng(d.getLatLng()),this._ignoreMove=!1,d.clusterShow&&d.clusterShow()}else r._recursively(l,o,c,function(m){m._recursivelyRemoveChildrenFromMap(l,c,i+1)});h._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(r){return new L.MarkerClusterGroup(r)};var a=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(r,i,o,l){L.Marker.prototype.initialize.call(this,o?o._cLatLng||o.getLatLng():new L.LatLng(0,0),{icon:this,pane:r.options.clusterPane}),this._group=r,this._zoom=i,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,o&&this._addChild(o),l&&this._addChild(l)},getAllChildMarkers:function(r,i){r=r||[];for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o].getAllChildMarkers(r,i);for(var l=this._markers.length-1;l>=0;l--)i&&this._markers[l].__dragStart||r.push(this._markers[l]);return r},getChildCount:function(){return this._childCount},zoomToBounds:function(r){for(var i=this._childClusters.slice(),o=this._group._map,l=o.getBoundsZoom(this._bounds),c=this._zoom+1,h=o.getZoom(),d;i.length>0&&l>c;){c++;var m=[];for(d=0;d<i.length;d++)m=m.concat(i[d]._childClusters);i=m}l>c?this._group._map.setView(this._latlng,c):l<=h?this._group._map.setView(this._latlng,h+1):this._group._map.fitBounds(this._bounds,r)},getBounds:function(){var r=new L.LatLngBounds;return r.extend(this._bounds),r},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(r,i){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(r),r instanceof L.MarkerCluster?(i||(this._childClusters.push(r),r.__parent=this),this._childCount+=r._childCount):(i||this._markers.push(r),this._childCount++),this.__parent&&this.__parent._addChild(r,!0)},_setClusterCenter:function(r){this._cLatLng||(this._cLatLng=r._cLatLng||r._latlng)},_resetBounds:function(){var r=this._bounds;r._southWest&&(r._southWest.lat=1/0,r._southWest.lng=1/0),r._northEast&&(r._northEast.lat=-1/0,r._northEast.lng=-1/0)},_recalculateBounds:function(){var r=this._markers,i=this._childClusters,o=0,l=0,c=this._childCount,h,d,m,f;if(c!==0){for(this._resetBounds(),h=0;h<r.length;h++)m=r[h]._latlng,this._bounds.extend(m),o+=m.lat,l+=m.lng;for(h=0;h<i.length;h++)d=i[h],d._boundsNeedUpdate&&d._recalculateBounds(),this._bounds.extend(d._bounds),m=d._wLatLng,f=d._childCount,o+=m.lat*f,l+=m.lng*f;this._latlng=this._wLatLng=new L.LatLng(o/c,l/c),this._boundsNeedUpdate=!1}},_addToMap:function(r){r&&(this._backupLatlng=this._latlng,this.setLatLng(r)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(r,i,o){this._recursively(r,this._group._map.getMinZoom(),o-1,function(l){var c=l._markers,h,d;for(h=c.length-1;h>=0;h--)d=c[h],d._icon&&(d._setPos(i),d.clusterHide())},function(l){var c=l._childClusters,h,d;for(h=c.length-1;h>=0;h--)d=c[h],d._icon&&(d._setPos(i),d.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(r,i,o,l){this._recursively(r,l,i,function(c){c._recursivelyAnimateChildrenIn(r,c._group._map.latLngToLayerPoint(c.getLatLng()).round(),o),c._isSingleParent()&&o-1===l?(c.clusterShow(),c._recursivelyRemoveChildrenFromMap(r,i,o)):c.clusterHide(),c._addToMap()})},_recursivelyBecomeVisible:function(r,i){this._recursively(r,this._group._map.getMinZoom(),i,null,function(o){o.clusterShow()})},_recursivelyAddChildrenToMap:function(r,i,o){this._recursively(o,this._group._map.getMinZoom()-1,i,function(l){if(i!==l._zoom)for(var c=l._markers.length-1;c>=0;c--){var h=l._markers[c];o.contains(h._latlng)&&(r&&(h._backupLatlng=h.getLatLng(),h.setLatLng(r),h.clusterHide&&h.clusterHide()),l._group._featureGroup.addLayer(h))}},function(l){l._addToMap(r)})},_recursivelyRestoreChildPositions:function(r){for(var i=this._markers.length-1;i>=0;i--){var o=this._markers[i];o._backupLatlng&&(o.setLatLng(o._backupLatlng),delete o._backupLatlng)}if(r-1===this._zoom)for(var l=this._childClusters.length-1;l>=0;l--)this._childClusters[l]._restorePosition();else for(var c=this._childClusters.length-1;c>=0;c--)this._childClusters[c]._recursivelyRestoreChildPositions(r)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(r,i,o,l){var c,h;this._recursively(r,i-1,o-1,function(d){for(h=d._markers.length-1;h>=0;h--)c=d._markers[h],(!l||!l.contains(c._latlng))&&(d._group._featureGroup.removeLayer(c),c.clusterShow&&c.clusterShow())},function(d){for(h=d._childClusters.length-1;h>=0;h--)c=d._childClusters[h],(!l||!l.contains(c._latlng))&&(d._group._featureGroup.removeLayer(c),c.clusterShow&&c.clusterShow())})},_recursively:function(r,i,o,l,c){var h=this._childClusters,d=this._zoom,m,f;if(i<=d&&(l&&l(this),c&&d===o&&c(this)),d<i||d<o)for(m=h.length-1;m>=0;m--)f=h[m],f._boundsNeedUpdate&&f._recalculateBounds(),r.intersects(f._bounds)&&f._recursively(r,i,o,l,c)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var r=this.options.opacity;return this.setOpacity(0),this.options.opacity=r,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(r){this._cellSize=r,this._sqCellSize=r*r,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(r,i){var o=this._getCoord(i.x),l=this._getCoord(i.y),c=this._grid,h=c[l]=c[l]||{},d=h[o]=h[o]||[],m=L.Util.stamp(r);this._objectPoint[m]=i,d.push(r)},updateObject:function(r,i){this.removeObject(r),this.addObject(r,i)},removeObject:function(r,i){var o=this._getCoord(i.x),l=this._getCoord(i.y),c=this._grid,h=c[l]=c[l]||{},d=h[o]=h[o]||[],m,f;for(delete this._objectPoint[L.Util.stamp(r)],m=0,f=d.length;m<f;m++)if(d[m]===r)return d.splice(m,1),f===1&&delete h[o],!0},eachObject:function(r,i){var o,l,c,h,d,m,f,p=this._grid;for(o in p){d=p[o];for(l in d)for(m=d[l],c=0,h=m.length;c<h;c++)f=r.call(i,m[c]),f&&(c--,h--)}},getNearObject:function(r){var i=this._getCoord(r.x),o=this._getCoord(r.y),l,c,h,d,m,f,p,g,_=this._objectPoint,y=this._sqCellSize,P=null;for(l=o-1;l<=o+1;l++)if(d=this._grid[l],d){for(c=i-1;c<=i+1;c++)if(m=d[c],m)for(h=0,f=m.length;h<f;h++)p=m[h],g=this._sqDist(_[L.Util.stamp(p)],r),(g<y||g<=y&&P===null)&&(y=g,P=p)}return P},_getCoord:function(r){var i=Math.floor(r/this._cellSize);return isFinite(i)?i:r},_sqDist:function(r,i){var o=i.x-r.x,l=i.y-r.y;return o*o+l*l}},(function(){L.QuickHull={getDistant:function(r,i){var o=i[1].lat-i[0].lat,l=i[0].lng-i[1].lng;return l*(r.lat-i[0].lat)+o*(r.lng-i[0].lng)},findMostDistantPointFromBaseLine:function(r,i){var o=0,l=null,c=[],h,d,m;for(h=i.length-1;h>=0;h--){if(d=i[h],m=this.getDistant(d,r),m>0)c.push(d);else continue;m>o&&(o=m,l=d)}return{maxPoint:l,newPoints:c}},buildConvexHull:function(r,i){var o=[],l=this.findMostDistantPointFromBaseLine(r,i);return l.maxPoint?(o=o.concat(this.buildConvexHull([r[0],l.maxPoint],l.newPoints)),o=o.concat(this.buildConvexHull([l.maxPoint,r[1]],l.newPoints)),o):[r[0]]},getConvexHull:function(r){var i=!1,o=!1,l=!1,c=!1,h=null,d=null,m=null,f=null,p=null,g=null,_;for(_=r.length-1;_>=0;_--){var y=r[_];(i===!1||y.lat>i)&&(h=y,i=y.lat),(o===!1||y.lat<o)&&(d=y,o=y.lat),(l===!1||y.lng>l)&&(m=y,l=y.lng),(c===!1||y.lng<c)&&(f=y,c=y.lng)}o!==i?(g=d,p=h):(g=f,p=m);var P=[].concat(this.buildConvexHull([g,p],r),this.buildConvexHull([p,g],r));return P}}})(),L.MarkerCluster.include({getConvexHull:function(){var r=this.getAllChildMarkers(),i=[],o,l;for(l=r.length-1;l>=0;l--)o=r[l].getLatLng(),i.push(o);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var r=this.getAllChildMarkers(null,!0),i=this._group,o=i._map,l=o.latLngToLayerPoint(this._latlng),c;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?c=this._group.options.spiderfyShapePositions(r.length,l):r.length>=this._circleSpiralSwitchover?c=this._generatePointsSpiral(r.length,l):(l.y+=10,c=this._generatePointsCircle(r.length,l)),this._animationSpiderfy(r,c)}},unspiderfy:function(r){this._group._inZoomAnimation||(this._animationUnspiderfy(r),this._group._spiderfied=null)},_generatePointsCircle:function(r,i){var o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+r),l=o/this._2PI,c=this._2PI/r,h=[],d,m;for(l=Math.max(l,35),h.length=r,d=0;d<r;d++)m=this._circleStartAngle+d*c,h[d]=new L.Point(i.x+l*Math.cos(m),i.y+l*Math.sin(m))._round();return h},_generatePointsSpiral:function(r,i){var o=this._group.options.spiderfyDistanceMultiplier,l=o*this._spiralLengthStart,c=o*this._spiralFootSeparation,h=o*this._spiralLengthFactor*this._2PI,d=0,m=[],f;for(m.length=r,f=r;f>=0;f--)f<r&&(m[f]=new L.Point(i.x+l*Math.cos(d),i.y+l*Math.sin(d))._round()),d+=c/l+f*5e-4,l+=h/d;return m},_noanimationUnspiderfy:function(){var r=this._group,i=r._map,o=r._featureGroup,l=this.getAllChildMarkers(null,!0),c,h;for(r._ignoreMove=!0,this.setOpacity(1),h=l.length-1;h>=0;h--)c=l[h],o.removeLayer(c),c._preSpiderfyLatlng&&(c.setLatLng(c._preSpiderfyLatlng),delete c._preSpiderfyLatlng),c.setZIndexOffset&&c.setZIndexOffset(0),c._spiderLeg&&(i.removeLayer(c._spiderLeg),delete c._spiderLeg);r.fire("unspiderfied",{cluster:this,markers:l}),r._ignoreMove=!1,r._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(r,i){var o=this._group,l=o._map,c=o._featureGroup,h=this._group.options.spiderLegPolylineOptions,d,m,f,p;for(o._ignoreMove=!0,d=0;d<r.length;d++)p=l.layerPointToLatLng(i[d]),m=r[d],f=new L.Polyline([this._latlng,p],h),l.addLayer(f),m._spiderLeg=f,m._preSpiderfyLatlng=m._latlng,m.setLatLng(p),m.setZIndexOffset&&m.setZIndexOffset(1e6),c.addLayer(m);this.setOpacity(.3),o._ignoreMove=!1,o.fire("spiderfied",{cluster:this,markers:r})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(r,i){var o=this,l=this._group,c=l._map,h=l._featureGroup,d=this._latlng,m=c.latLngToLayerPoint(d),f=L.Path.SVG,p=L.extend({},this._group.options.spiderLegPolylineOptions),g=p.opacity,_,y,P,E,R,W;for(g===void 0&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),f?(p.opacity=0,p.className=(p.className||"")+" leaflet-cluster-spider-leg"):p.opacity=g,l._ignoreMove=!0,_=0;_<r.length;_++)y=r[_],W=c.layerPointToLatLng(i[_]),P=new L.Polyline([d,W],p),c.addLayer(P),y._spiderLeg=P,f&&(E=P._path,R=E.getTotalLength()+.1,E.style.strokeDasharray=R,E.style.strokeDashoffset=R),y.setZIndexOffset&&y.setZIndexOffset(1e6),y.clusterHide&&y.clusterHide(),h.addLayer(y),y._setPos&&y._setPos(m);for(l._forceLayout(),l._animationStart(),_=r.length-1;_>=0;_--)W=c.layerPointToLatLng(i[_]),y=r[_],y._preSpiderfyLatlng=y._latlng,y.setLatLng(W),y.clusterShow&&y.clusterShow(),f&&(P=y._spiderLeg,E=P._path,E.style.strokeDashoffset=0,P.setStyle({opacity:g}));this.setOpacity(.3),l._ignoreMove=!1,setTimeout(function(){l._animationEnd(),l.fire("spiderfied",{cluster:o,markers:r})},200)},_animationUnspiderfy:function(r){var i=this,o=this._group,l=o._map,c=o._featureGroup,h=r?l._latLngToNewLayerPoint(this._latlng,r.zoom,r.center):l.latLngToLayerPoint(this._latlng),d=this.getAllChildMarkers(null,!0),m=L.Path.SVG,f,p,g,_,y,P;for(o._ignoreMove=!0,o._animationStart(),this.setOpacity(1),p=d.length-1;p>=0;p--)f=d[p],f._preSpiderfyLatlng&&(f.closePopup(),f.setLatLng(f._preSpiderfyLatlng),delete f._preSpiderfyLatlng,P=!0,f._setPos&&(f._setPos(h),P=!1),f.clusterHide&&(f.clusterHide(),P=!1),P&&c.removeLayer(f),m&&(g=f._spiderLeg,_=g._path,y=_.getTotalLength()+.1,_.style.strokeDashoffset=y,g.setStyle({opacity:0})));o._ignoreMove=!1,setTimeout(function(){var E=0;for(p=d.length-1;p>=0;p--)f=d[p],f._spiderLeg&&E++;for(p=d.length-1;p>=0;p--)f=d[p],f._spiderLeg&&(f.clusterShow&&f.clusterShow(),f.setZIndexOffset&&f.setZIndexOffset(0),E>1&&c.removeLayer(f),l.removeLayer(f._spiderLeg),delete f._spiderLeg);o._animationEnd(),o.fire("unspiderfied",{cluster:i,markers:d})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(r){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(r))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(r){this._spiderfied&&this._spiderfied.unspiderfy(r)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(r){r._spiderLeg&&(this._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow(),r.setZIndexOffset&&r.setZIndexOffset(0),this._map.removeLayer(r._spiderLeg),delete r._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(r){return r?r instanceof L.MarkerClusterGroup?r=r._topClusterLevel.getAllChildMarkers():r instanceof L.LayerGroup?r=r._layers:r instanceof L.MarkerCluster?r=r.getAllChildMarkers():r instanceof L.Marker&&(r=[r]):r=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(r),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(r),this},_flagParentsIconsNeedUpdate:function(r){var i,o;for(i in r)for(o=r[i].__parent;o;)o._iconNeedsUpdate=!0,o=o.__parent},_refreshSingleMarkerModeMarkers:function(r){var i,o;for(i in r)o=r[i],this.hasLayer(o)&&o.setIcon(this._overrideMarkerIcon(o))}}),L.Marker.include({refreshIconOptions:function(r,i){var o=this.options.icon;return L.setOptions(o,r),this.setIcon(o),i&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=n,t.MarkerCluster=a,Object.defineProperty(t,"__esModule",{value:!0})})})(fe,fe.exports)),fe.exports}Kn();const Jn={class:"bg-white rounded-lg shadow p-6 mb-8"},er={class:"flex items-center justify-between mb-4"},tr={class:"text-gray-600"},nr={class:"flex items-center space-x-3"},rr={class:"text-sm text-gray-500"},sr={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4"},ir={__name:"PhotoMap",props:{geoData:{type:Array,required:!0}},setup(s){const e=s,t=$(null);let n=null,a=null,r=[];const i=$(!0),o=$(0),l=()=>{if(!t.value||e.geoData.length===0)return;n&&(n.remove(),n=null);const d=e.geoData.filter(g=>g.lat&&g.lon);if(d.length===0)return;const m=d.reduce((g,_)=>g+_.lat,0)/d.length,f=d.reduce((g,_)=>g+_.lon,0)/d.length;n=K.map(t.value,{zoomControl:!0,attributionControl:!0}).setView([m,f],8),K.tileLayer("https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap contributors &copy; CARTO",subdomains:"abcd",maxZoom:19}).addTo(n);const p=K.divIcon({className:"custom-location-marker",html:`
      <div style="position: relative; width: 20px; height: 20px;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#EF4444" stroke="#DC2626" stroke-width="0.5"/>
          <circle cx="12" cy="9" r="1.5" fill="white"/>
        </svg>
      </div>
    `,iconSize:[20,20],iconAnchor:[10,20],popupAnchor:[0,-20]});if(a=K.markerClusterGroup({chunkedLoading:!0,chunkInterval:200,chunkDelay:50,maxClusterRadius:60,disableClusteringAtZoom:15,animate:!0,animateAddingMarkers:!0,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,iconCreateFunction:function(g){const _=g.getChildCount();let y="cluster-small";return _>=50?y="cluster-large":_>=10&&(y="cluster-medium"),K.divIcon({html:`
          <div class="custom-cluster-marker ${y}">
            <div class="cluster-inner">
              <span class="cluster-count">${_}</span>
            </div>
          </div>
        `,className:"custom-cluster-container",iconSize:K.point(40,40),iconAnchor:[20,20]})}}),r=[],d.forEach(g=>{const _=K.marker([g.lat,g.lon],{icon:p}),y=`
      <div style="min-width: 200px;">
        <img src="${g.thumbnail}" alt="${g.filename}" style="width: 100%; max-width: 300px; height: auto; border-radius: 4px; margin-bottom: 8px;" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22150%22%3E%3Crect fill=%22%23ddd%22 width=%22200%22 height=%22150%22/%3E%3Ctext fill=%22%23999%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22%3ENo thumbnail%3C/text%3E%3C/svg%3E'" />
        <div style="font-weight: 600; margin-bottom: 4px; word-break: break-word;">${g.filename}</div>
        <div style="font-size: 12px; color: #666; margin-bottom: 4px;">By: <a href="https://commons.wikimedia.org/wiki/User:${encodeURIComponent(g.author)}" target="_blank" rel="noopener noreferrer" style="color: #3B82F6; text-decoration: none; font-weight: 500;">${g.author}</a></div>
        <div style="font-size: 12px; color: #666; margin-bottom: 8px;">Date: ${g.date}</div>
        <a href="${g.commonsUrl}" target="_blank" rel="noopener noreferrer" style="display: inline-block; background-color: #3B82F6; color: white; padding: 6px 12px; border-radius: 4px; text-decoration: none; font-size: 12px; font-weight: 500;">View on Commons</a>
      </div>
    `;_.bindPopup(y,{maxWidth:350}),a.addLayer(_),r.push(_)}),i.value?n.addLayer(a):r.forEach(g=>g.addTo(n)),c(),d.length>0){const g=K.latLngBounds(d.map(_=>[_.lat,_.lon]));n.fitBounds(g,{padding:[0,0]})}a&&(a.on("clustermouseover",c),a.on("clusterclick",c),n.on("zoomend",c))},c=()=>{if(a&&i.value){let d=0;n.eachLayer(m=>{m._group===a&&m._icon&&d++}),o.value=d}else o.value=r.length},h=()=>{!n||!a||(i.value=!i.value,i.value?(r.forEach(d=>{n.hasLayer(d)&&n.removeLayer(d)}),n.addLayer(a)):(n.hasLayer(a)&&n.removeLayer(a),r.forEach(d=>d.addTo(n))),c())};return Le(()=>{e.geoData.length>0&&l()}),Ce(()=>e.geoData,d=>{d.length>0&&l()},{deep:!0}),nt(()=>{n&&(n.remove(),n=null),a=null,r=[]}),(d,m)=>(M(),D("div",Jn,[u("div",er,[u("div",null,[m[0]||(m[0]=u("h2",{class:"text-xl font-bold text-gray-800 mb-1"},"Photo Locations Map",-1)),u("p",tr,S(s.geoData.length)+" photos with geolocation data. Click on markers to view photo details. ",1)]),u("div",nr,[u("div",rr,[m[1]||(m[1]=u("span",{class:"font-medium"},"Clusters:",-1)),ge(" "+S(o.value),1)]),u("button",{onClick:h,class:me(["px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200",i.value?"bg-wikimedia-blue text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},S(i.value?"Clustering ON":"Clustering OFF"),3)])]),i.value?(M(),D("div",sr,[...m[2]||(m[2]=[u("div",{class:"flex items-center text-sm text-blue-800"},[u("svg",{class:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),u("span",null," Markers are grouped into clusters. Zoom in or click on clusters to expand them and see individual photos. ")],-1)])])):G("",!0),u("div",{ref_key:"mapContainer",ref:t,class:"h-[500px] w-full rounded-lg border border-gray-300 overflow-hidden"},null,512)]))}},or=Be(ir,[["__scopeId","data-v-1d54145c"]]);X.register(...Tt);const rt=6048e5,ar=864e5,_e=6e4,ye=36e5,lr=1e3,Re=Symbol.for("constructDateFrom");function U(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&Re in s?s[Re](e):s instanceof Date?new s.constructor(e):new Date(e)}function T(s,e){return U(e||s,s)}function Me(s,e,t){const n=T(s,t?.in);return isNaN(e)?U(t?.in||s,NaN):(e&&n.setDate(n.getDate()+e),n)}function Fe(s,e,t){const n=T(s,t?.in);if(isNaN(e))return U(s,NaN);if(!e)return n;const a=n.getDate(),r=U(s,n.getTime());r.setMonth(n.getMonth()+e+1,0);const i=r.getDate();return a>=i?r:(n.setFullYear(r.getFullYear(),r.getMonth(),a),n)}function ze(s,e,t){return U(s,+T(s)+e)}function ur(s,e,t){return ze(s,e*ye)}let dr={};function re(){return dr}function Q(s,e){const t=re(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,a=T(s,e?.in),r=a.getDay(),i=(r<n?7:0)+r-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function ae(s,e){return Q(s,{...e,weekStartsOn:1})}function st(s,e){const t=T(s,e?.in),n=t.getFullYear(),a=U(t,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const r=ae(a),i=U(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=ae(i);return t.getTime()>=r.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function xe(s){const e=T(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function se(s,...e){const t=U.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function Ee(s,e){const t=T(s,e?.in);return t.setHours(0,0,0,0),t}function it(s,e,t){const[n,a]=se(t?.in,s,e),r=Ee(n),i=Ee(a),o=+r-xe(r),l=+i-xe(i);return Math.round((o-l)/ar)}function cr(s,e){const t=st(s,e),n=U(s,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),ae(n)}function hr(s,e,t){const n=T(s,t?.in);return n.setTime(n.getTime()+e*_e),n}function fr(s,e,t){return Fe(s,e*3,t)}function mr(s,e,t){return ze(s,e*1e3)}function pr(s,e,t){return Me(s,e*7,t)}function gr(s,e,t){return Fe(s,e*12,t)}function pe(s,e){const t=+T(s)-+T(e);return t<0?-1:t>0?1:t}function _r(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function ot(s){return!(!_r(s)&&typeof s!="number"||isNaN(+T(s)))}function yr(s,e,t){const[n,a]=se(t?.in,s,e),r=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return r*12+i}function vr(s,e,t){const[n,a]=se(t?.in,s,e);return n.getFullYear()-a.getFullYear()}function at(s,e,t){const[n,a]=se(t?.in,s,e),r=Ze(n,a),i=Math.abs(it(n,a));n.setDate(n.getDate()-r*i);const o=+(Ze(n,a)===-r),l=r*(i-o);return l===0?0:l}function Ze(s,e){const t=s.getFullYear()-e.getFullYear()||s.getMonth()-e.getMonth()||s.getDate()-e.getDate()||s.getHours()-e.getHours()||s.getMinutes()-e.getMinutes()||s.getSeconds()-e.getSeconds()||s.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function ve(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function wr(s,e,t){const[n,a]=se(t?.in,s,e),r=(+n-+a)/ye;return ve(t?.roundingMethod)(r)}function Ue(s,e){return+T(s)-+T(e)}function br(s,e,t){const n=Ue(s,e)/_e;return ve(t?.roundingMethod)(n)}function lt(s,e){const t=T(s,e?.in);return t.setHours(23,59,59,999),t}function ut(s,e){const t=T(s,e?.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function xr(s,e){const t=T(s,e?.in);return+lt(t,e)==+ut(t,e)}function dt(s,e,t){const[n,a,r]=se(t?.in,s,s,e),i=pe(a,r),o=Math.abs(yr(a,r));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*o);let l=pe(a,r)===-i;xr(n)&&o===1&&pe(n,r)===1&&(l=!1);const c=i*(o-+l);return c===0?0:c}function kr(s,e,t){const n=dt(s,e,t)/3;return ve(t?.roundingMethod)(n)}function Cr(s,e,t){const n=Ue(s,e)/1e3;return ve(t?.roundingMethod)(n)}function Lr(s,e,t){const n=at(s,e,t)/7;return ve(t?.roundingMethod)(n)}function Mr(s,e,t){const[n,a]=se(t?.in,s,e),r=pe(n,a),i=Math.abs(vr(n,a));n.setFullYear(1584),a.setFullYear(1584);const o=pe(n,a)===-r,l=r*(i-+o);return l===0?0:l}function Dr(s,e){const t=T(s,e?.in),n=t.getMonth(),a=n-n%3;return t.setMonth(a,1),t.setHours(0,0,0,0),t}function Pr(s,e){const t=T(s,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Or(s,e){const t=T(s,e?.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function ct(s,e){const t=T(s,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Tr(s,e){const t=T(s,e?.in);return t.setMinutes(59,59,999),t}function Sr(s,e){const t=re(),n=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,a=T(s,e?.in),r=a.getDay(),i=(r<n?-7:0)+6-(r-n);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function $r(s,e){const t=T(s,e?.in);return t.setSeconds(59,999),t}function Er(s,e){const t=T(s,e?.in),n=t.getMonth(),a=n-n%3+3;return t.setMonth(a,0),t.setHours(23,59,59,999),t}function Nr(s,e){const t=T(s,e?.in);return t.setMilliseconds(999),t}const Ir={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Br=(s,e,t)=>{let n;const a=Ir[s];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Pe(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const Fr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ur={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hr={date:Pe({formats:Fr,defaultWidth:"full"}),time:Pe({formats:zr,defaultWidth:"full"}),dateTime:Pe({formats:Ur,defaultWidth:"full"})},Ar={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Yr=(s,e,t,n)=>Ar[s];function de(s){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let a;if(n==="formatting"&&s.formattingValues){const i=s.defaultFormattingWidth||s.defaultWidth,o=t?.width?String(t.width):i;a=s.formattingValues[o]||s.formattingValues[i]}else{const i=s.defaultWidth,o=t?.width?String(t.width):s.defaultWidth;a=s.values[o]||s.values[i]}const r=s.argumentCallback?s.argumentCallback(e):e;return a[r]}}const Wr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Gr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Rr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Zr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vr=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Qr={ordinalNumber:Vr,era:de({values:Wr,defaultWidth:"wide"}),quarter:de({values:qr,defaultWidth:"wide",argumentCallback:s=>s-1}),month:de({values:jr,defaultWidth:"wide"}),day:de({values:Gr,defaultWidth:"wide"}),dayPeriod:de({values:Rr,defaultWidth:"wide",formattingValues:Zr,defaultFormattingWidth:"wide"})};function ce(s){return(e,t={})=>{const n=t.width,a=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],r=e.match(a);if(!r)return null;const i=r[0],o=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],l=Array.isArray(o)?Kr(o,d=>d.test(i)):Xr(o,d=>d.test(i));let c;c=s.valueCallback?s.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const h=e.slice(i.length);return{value:c,rest:h}}}function Xr(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function Kr(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function Jr(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const a=n[0],r=e.match(s.parsePattern);if(!r)return null;let i=s.valueCallback?s.valueCallback(r[0]):r[0];i=t.valueCallback?t.valueCallback(i):i;const o=e.slice(a.length);return{value:i,rest:o}}}const es=/^(\d+)(th|st|nd|rd)?/i,ts=/\d+/i,ns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rs={any:[/^b/i,/^(a|c)/i]},ss={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},is={any:[/1/i,/2/i,/3/i,/4/i]},os={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},as={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ls={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},us={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ds={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hs={ordinalNumber:Jr({matchPattern:es,parsePattern:ts,valueCallback:s=>parseInt(s,10)}),era:ce({matchPatterns:ns,defaultMatchWidth:"wide",parsePatterns:rs,defaultParseWidth:"any"}),quarter:ce({matchPatterns:ss,defaultMatchWidth:"wide",parsePatterns:is,defaultParseWidth:"any",valueCallback:s=>s+1}),month:ce({matchPatterns:os,defaultMatchWidth:"wide",parsePatterns:as,defaultParseWidth:"any"}),day:ce({matchPatterns:ls,defaultMatchWidth:"wide",parsePatterns:us,defaultParseWidth:"any"}),dayPeriod:ce({matchPatterns:ds,defaultMatchWidth:"any",parsePatterns:cs,defaultParseWidth:"any"})},ht={code:"en-US",formatDistance:Br,formatLong:Hr,formatRelative:Yr,localize:Qr,match:hs,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fs(s,e){const t=T(s,e?.in);return it(t,ct(t))+1}function ft(s,e){const t=T(s,e?.in),n=+ae(t)-+cr(t);return Math.round(n/rt)+1}function He(s,e){const t=T(s,e?.in),n=t.getFullYear(),a=re(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=U(e?.in||s,0);i.setFullYear(n+1,0,r),i.setHours(0,0,0,0);const o=Q(i,e),l=U(e?.in||s,0);l.setFullYear(n,0,r),l.setHours(0,0,0,0);const c=Q(l,e);return+t>=+o?n+1:+t>=+c?n:n-1}function ms(s,e){const t=re(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,a=He(s,e),r=U(e?.in||s,0);return r.setFullYear(a,0,n),r.setHours(0,0,0,0),Q(r,e)}function mt(s,e){const t=T(s,e?.in),n=+Q(t,e)-+ms(t,e);return Math.round(n/rt)+1}function I(s,e){const t=s<0?"-":"",n=Math.abs(s).toString().padStart(e,"0");return t+n}const J={y(s,e){const t=s.getFullYear(),n=t>0?t:1-t;return I(e==="yy"?n%100:n,e.length)},M(s,e){const t=s.getMonth();return e==="M"?String(t+1):I(t+1,2)},d(s,e){return I(s.getDate(),e.length)},a(s,e){const t=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(s,e){return I(s.getHours()%12||12,e.length)},H(s,e){return I(s.getHours(),e.length)},m(s,e){return I(s.getMinutes(),e.length)},s(s,e){return I(s.getSeconds(),e.length)},S(s,e){const t=e.length,n=s.getMilliseconds(),a=Math.trunc(n*Math.pow(10,t-3));return I(a,e.length)}},oe={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ve={G:function(s,e,t){const n=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){const n=s.getFullYear(),a=n>0?n:1-n;return t.ordinalNumber(a,{unit:"year"})}return J.y(s,e)},Y:function(s,e,t,n){const a=He(s,n),r=a>0?a:1-a;if(e==="YY"){const i=r%100;return I(i,2)}return e==="Yo"?t.ordinalNumber(r,{unit:"year"}):I(r,e.length)},R:function(s,e){const t=st(s);return I(t,e.length)},u:function(s,e){const t=s.getFullYear();return I(t,e.length)},Q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return I(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return I(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,e,t){const n=s.getMonth();switch(e){case"M":case"MM":return J.M(s,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(s,e,t){const n=s.getMonth();switch(e){case"L":return String(n+1);case"LL":return I(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(s,e,t,n){const a=mt(s,n);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):I(a,e.length)},I:function(s,e,t){const n=ft(s);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):I(n,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getDate(),{unit:"date"}):J.d(s,e)},D:function(s,e,t){const n=fs(s);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):I(n,e.length)},E:function(s,e,t){const n=s.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(s,e,t,n){const a=s.getDay(),r=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return I(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(s,e,t,n){const a=s.getDay(),r=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return I(r,e.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(s,e,t){const n=s.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return I(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(s,e,t){const a=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(s,e,t){const n=s.getHours();let a;switch(n===12?a=oe.noon:n===0?a=oe.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(s,e,t){const n=s.getHours();let a;switch(n>=17?a=oe.evening:n>=12?a=oe.afternoon:n>=4?a=oe.morning:a=oe.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){let n=s.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return J.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getHours(),{unit:"hour"}):J.H(s,e)},K:function(s,e,t){const n=s.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):I(n,e.length)},k:function(s,e,t){let n=s.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):I(n,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getMinutes(),{unit:"minute"}):J.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getSeconds(),{unit:"second"}):J.s(s,e)},S:function(s,e){return J.S(s,e)},X:function(s,e,t){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Xe(n);case"XXXX":case"XX":return ne(n);case"XXXXX":case"XXX":default:return ne(n,":")}},x:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"x":return Xe(n);case"xxxx":case"xx":return ne(n);case"xxxxx":case"xxx":default:return ne(n,":")}},O:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Qe(n,":");case"OOOO":default:return"GMT"+ne(n,":")}},z:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Qe(n,":");case"zzzz":default:return"GMT"+ne(n,":")}},t:function(s,e,t){const n=Math.trunc(+s/1e3);return I(n,e.length)},T:function(s,e,t){return I(+s,e.length)}};function Qe(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),a=Math.trunc(n/60),r=n%60;return r===0?t+String(a):t+String(a)+e+I(r,2)}function Xe(s,e){return s%60===0?(s>0?"-":"+")+I(Math.abs(s)/60,2):ne(s,e)}function ne(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),a=I(Math.trunc(n/60),2),r=I(n%60,2);return t+a+e+r}const Ke=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},pt=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ps=(s,e)=>{const t=s.match(/(P+)(p+)?/)||[],n=t[1],a=t[2];if(!a)return Ke(s,e);let r;switch(n){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",Ke(n,e)).replace("{{time}}",pt(a,e))},Ne={p:pt,P:ps},gs=/^D+$/,_s=/^Y+$/,ys=["D","DD","YY","YYYY"];function gt(s){return gs.test(s)}function _t(s){return _s.test(s)}function Ie(s,e,t){const n=vs(s,e,t);if(console.warn(n),ys.includes(s))throw new RangeError(n)}function vs(s,e,t){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ws=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bs=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xs=/^'([^]*?)'?$/,ks=/''/g,Cs=/[a-zA-Z]/;function Ls(s,e,t){const n=re(),a=t?.locale??n.locale??ht,r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=T(s,t?.in);if(!ot(o))throw new RangeError("Invalid time value");let l=e.match(bs).map(h=>{const d=h[0];if(d==="p"||d==="P"){const m=Ne[d];return m(h,a.formatLong)}return h}).join("").match(ws).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const d=h[0];if(d==="'")return{isToken:!1,value:Ms(h)};if(Ve[d])return{isToken:!0,value:h};if(d.match(Cs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:h}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const c={firstWeekContainsDate:r,weekStartsOn:i,locale:a};return l.map(h=>{if(!h.isToken)return h.value;const d=h.value;(!t?.useAdditionalWeekYearTokens&&_t(d)||!t?.useAdditionalDayOfYearTokens&&gt(d))&&Ie(d,e,String(s));const m=Ve[d[0]];return m(o,d,a.localize,c)}).join("")}function Ms(s){const e=s.match(xs);return e?e[1].replace(ks,"'"):s}function Ds(){return Object.assign({},re())}function Ps(s,e){const t=T(s,e?.in).getDay();return t===0?7:t}function Os(s,e){const t=Ts(e)?new e(0):U(e,0);return t.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),t.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),t}function Ts(s){return typeof s=="function"&&s.prototype?.constructor===s}const Ss=10;class yt{subPriority=0;validate(e,t){return!0}}class $s extends yt{constructor(e,t,n,a,r){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=a,r&&(this.subPriority=r)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Es extends yt{priority=Ss;subPriority=-1;constructor(e,t){super(),this.context=e||(n=>U(t,n))}set(e,t){return t.timestampIsSet?e:U(e,Os(e,this.context))}}class N{run(e,t,n,a){const r=this.parse(e,t,n,a);return r?{setter:new $s(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(e,t,n){return!0}}class Ns extends N{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const A={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Z={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Y(s,e){return s&&{value:e(s.value),rest:s.rest}}function z(s,e){const t=e.match(s);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function V(s,e){const t=e.match(s);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,a=t[2]?parseInt(t[2],10):0,r=t[3]?parseInt(t[3],10):0,i=t[5]?parseInt(t[5],10):0;return{value:n*(a*ye+r*_e+i*lr),rest:e.slice(t[0].length)}}function vt(s){return z(A.anyDigitsSigned,s)}function H(s,e){switch(s){case 1:return z(A.singleDigit,e);case 2:return z(A.twoDigits,e);case 3:return z(A.threeDigits,e);case 4:return z(A.fourDigits,e);default:return z(new RegExp("^\\d{1,"+s+"}"),e)}}function ke(s,e){switch(s){case 1:return z(A.singleDigitSigned,e);case 2:return z(A.twoDigitsSigned,e);case 3:return z(A.threeDigitsSigned,e);case 4:return z(A.fourDigitsSigned,e);default:return z(new RegExp("^-?\\d{1,"+s+"}"),e)}}function Ae(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function wt(s,e){const t=e>0,n=t?e:1-e;let a;if(n<=50)a=s||100;else{const r=n+50,i=Math.trunc(r/100)*100,o=s>=r%100;a=s+i-(o?100:0)}return t?a:1-a}function bt(s){return s%400===0||s%4===0&&s%100!==0}class Is extends N{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const a=r=>({year:r,isTwoDigitYear:t==="yy"});switch(t){case"y":return Y(H(4,e),a);case"yo":return Y(n.ordinalNumber(e,{unit:"year"}),a);default:return Y(H(t.length,e),a)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const a=e.getFullYear();if(n.isTwoDigitYear){const i=wt(n.year,a);return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}const r=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}class Bs extends N{priority=130;parse(e,t,n){const a=r=>({year:r,isTwoDigitYear:t==="YY"});switch(t){case"Y":return Y(H(4,e),a);case"Yo":return Y(n.ordinalNumber(e,{unit:"year"}),a);default:return Y(H(t.length,e),a)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,a){const r=He(e,a);if(n.isTwoDigitYear){const o=wt(n.year,r);return e.setFullYear(o,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),Q(e,a)}const i=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(i,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),Q(e,a)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Fs extends N{priority=130;parse(e,t){return ke(t==="R"?4:t.length,e)}set(e,t,n){const a=U(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),ae(a)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class zs extends N{priority=130;parse(e,t){return ke(t==="u"?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Us extends N{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return H(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Hs extends N{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return H(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class As extends N{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const a=r=>r-1;switch(t){case"M":return Y(z(A.month,e),a);case"MM":return Y(H(2,e),a);case"Mo":return Y(n.ordinalNumber(e,{unit:"month"}),a);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class Ys extends N{priority=110;parse(e,t,n){const a=r=>r-1;switch(t){case"L":return Y(z(A.month,e),a);case"LL":return Y(H(2,e),a);case"Lo":return Y(n.ordinalNumber(e,{unit:"month"}),a);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Ws(s,e,t){const n=T(s,t?.in),a=mt(n,t)-e;return n.setDate(n.getDate()-a*7),T(n,t?.in)}class qs extends N{priority=100;parse(e,t,n){switch(t){case"w":return z(A.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return H(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,a){return Q(Ws(e,n,a),a)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function js(s,e,t){const n=T(s,t?.in),a=ft(n,t)-e;return n.setDate(n.getDate()-a*7),n}class Gs extends N{priority=100;parse(e,t,n){switch(t){case"I":return z(A.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return H(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return ae(js(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Rs=[31,28,31,30,31,30,31,31,30,31,30,31],Zs=[31,29,31,30,31,30,31,31,30,31,30,31];class Vs extends N{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return z(A.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return H(t.length,e)}}validate(e,t){const n=e.getFullYear(),a=bt(n),r=e.getMonth();return a?t>=1&&t<=Zs[r]:t>=1&&t<=Rs[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Qs extends N{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return z(A.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return H(t.length,e)}}validate(e,t){const n=e.getFullYear();return bt(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Ye(s,e,t){const n=re(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=T(s,t?.in),i=r.getDay(),l=(e%7+7)%7,c=7-a,h=e<0||e>6?e-(i+c)%7:(l+c)%7-(i+c)%7;return Me(r,h,t)}class Xs extends N{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,a){return e=Ye(e,n,a),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Ks extends N{priority=90;parse(e,t,n,a){const r=i=>{const o=Math.floor((i-1)/7)*7;return(i+a.weekStartsOn+6)%7+o};switch(t){case"e":case"ee":return Y(H(t.length,e),r);case"eo":return Y(n.ordinalNumber(e,{unit:"day"}),r);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,a){return e=Ye(e,n,a),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Js extends N{priority=90;parse(e,t,n,a){const r=i=>{const o=Math.floor((i-1)/7)*7;return(i+a.weekStartsOn+6)%7+o};switch(t){case"c":case"cc":return Y(H(t.length,e),r);case"co":return Y(n.ordinalNumber(e,{unit:"day"}),r);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,a){return e=Ye(e,n,a),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function ei(s,e,t){const n=T(s,t?.in),a=Ps(n,t),r=e-a;return Me(n,r,t)}class ti extends N{priority=90;parse(e,t,n){const a=r=>r===0?7:r;switch(t){case"i":case"ii":return H(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Y(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return Y(n.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Y(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a);case"iiii":default:return Y(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return e=ei(e,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class ni extends N{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Ae(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class ri extends N{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Ae(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class si extends N{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Ae(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class ii extends N{priority=70;parse(e,t,n){switch(t){case"h":return z(A.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return H(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const a=e.getHours()>=12;return a&&n<12?e.setHours(n+12,0,0,0):!a&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class oi extends N{priority=70;parse(e,t,n){switch(t){case"H":return z(A.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return H(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class ai extends N{priority=70;parse(e,t,n){switch(t){case"K":return z(A.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return H(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class li extends N{priority=70;parse(e,t,n){switch(t){case"k":return z(A.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return H(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const a=n<=24?n%24:n;return e.setHours(a,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class ui extends N{priority=60;parse(e,t,n){switch(t){case"m":return z(A.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return H(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]}class di extends N{priority=50;parse(e,t,n){switch(t){case"s":return z(A.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return H(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]}class ci extends N{priority=30;parse(e,t){const n=a=>Math.trunc(a*Math.pow(10,-t.length+3));return Y(H(t.length,e),n)}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]}class hi extends N{priority=10;parse(e,t){switch(t){case"X":return V(Z.basicOptionalMinutes,e);case"XX":return V(Z.basic,e);case"XXXX":return V(Z.basicOptionalSeconds,e);case"XXXXX":return V(Z.extendedOptionalSeconds,e);case"XXX":default:return V(Z.extended,e)}}set(e,t,n){return t.timestampIsSet?e:U(e,e.getTime()-xe(e)-n)}incompatibleTokens=["t","T","x"]}class fi extends N{priority=10;parse(e,t){switch(t){case"x":return V(Z.basicOptionalMinutes,e);case"xx":return V(Z.basic,e);case"xxxx":return V(Z.basicOptionalSeconds,e);case"xxxxx":return V(Z.extendedOptionalSeconds,e);case"xxx":default:return V(Z.extended,e)}}set(e,t,n){return t.timestampIsSet?e:U(e,e.getTime()-xe(e)-n)}incompatibleTokens=["t","T","X"]}class mi extends N{priority=40;parse(e){return vt(e)}set(e,t,n){return[U(e,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class pi extends N{priority=20;parse(e){return vt(e)}set(e,t,n){return[U(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const gi={G:new Ns,y:new Is,Y:new Bs,R:new Fs,u:new zs,Q:new Us,q:new Hs,M:new As,L:new Ys,w:new qs,I:new Gs,d:new Vs,D:new Qs,E:new Xs,e:new Ks,c:new Js,i:new ti,a:new ni,b:new ri,B:new si,h:new ii,H:new oi,K:new ai,k:new li,m:new ui,s:new di,S:new ci,X:new hi,x:new fi,t:new mi,T:new pi},_i=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yi=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vi=/^'([^]*?)'?$/,wi=/''/g,bi=/\S/,xi=/[a-zA-Z]/;function ki(s,e,t,n){const a=()=>U(n?.in||t,NaN),r=Ds(),i=n?.locale??r.locale??ht,o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0;if(!e)return s?a():T(t,n?.in);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:i},h=[new Es(n?.in,t)],d=e.match(yi).map(_=>{const y=_[0];if(y in Ne){const P=Ne[y];return P(_,i.formatLong)}return _}).join("").match(_i),m=[];for(let _ of d){!n?.useAdditionalWeekYearTokens&&_t(_)&&Ie(_,e,s),!n?.useAdditionalDayOfYearTokens&&gt(_)&&Ie(_,e,s);const y=_[0],P=gi[y];if(P){const{incompatibleTokens:E}=P;if(Array.isArray(E)){const W=m.find(F=>E.includes(F.token)||F.token===y);if(W)throw new RangeError(`The format string mustn't contain \`${W.fullToken}\` and \`${_}\` at the same time`)}else if(P.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);m.push({token:y,fullToken:_});const R=P.run(s,_,i.match,c);if(!R)return a();h.push(R.setter),s=R.rest}else{if(y.match(xi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(_==="''"?_="'":y==="'"&&(_=Ci(_)),s.indexOf(_)===0)s=s.slice(_.length);else return a()}}if(s.length>0&&bi.test(s))return a();const f=h.map(_=>_.priority).sort((_,y)=>y-_).filter((_,y,P)=>P.indexOf(_)===y).map(_=>h.filter(y=>y.priority===_).sort((y,P)=>P.subPriority-y.subPriority)).map(_=>_[0]);let p=T(t,n?.in);if(isNaN(+p))return a();const g={};for(const _ of f){if(!_.validate(p,c))return a();const y=_.set(p,g,c);Array.isArray(y)?(p=y[0],Object.assign(g,y[1])):p=y}return p}function Ci(s){return s.match(vi)[1].replace(wi,"'")}function Li(s,e){const t=T(s,e?.in);return t.setMinutes(0,0,0),t}function Mi(s,e){const t=T(s,e?.in);return t.setSeconds(0,0),t}function Di(s,e){const t=T(s,e?.in);return t.setMilliseconds(0),t}function Pi(s,e){const t=()=>U(e?.in,NaN),n=e?.additionalDigits??2,a=$i(s);let r;if(a.date){const c=Ei(a.date,n);r=Ni(c.restDateString,c.year)}if(!r||isNaN(+r))return t();const i=+r;let o=0,l;if(a.time&&(o=Ii(a.time),isNaN(o)))return t();if(a.timezone){if(l=Bi(a.timezone),isNaN(l))return t()}else{const c=new Date(i+o),h=T(0,e?.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return T(i+o+l,e?.in)}const be={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Oi=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ti=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Si=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $i(s){const e={},t=s.split(be.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],be.timeZoneDelimiter.test(e.date)&&(e.date=s.split(be.timeZoneDelimiter)[0],n=s.substr(e.date.length,s.length))),n){const a=be.timezone.exec(n);a?(e.time=n.replace(a[1],""),e.timezone=a[1]):e.time=n}return e}function Ei(s,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=s.match(t);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,r=n[2]?parseInt(n[2]):null;return{year:r===null?a:r*100,restDateString:s.slice((n[1]||n[2]).length)}}function Ni(s,e){if(e===null)return new Date(NaN);const t=s.match(Oi);if(!t)return new Date(NaN);const n=!!t[4],a=he(t[1]),r=he(t[2])-1,i=he(t[3]),o=he(t[4]),l=he(t[5])-1;if(n)return Ai(e,o,l)?Fi(e,o,l):new Date(NaN);{const c=new Date(0);return!Ui(e,r,i)||!Hi(e,a)?new Date(NaN):(c.setUTCFullYear(e,r,Math.max(a,i)),c)}}function he(s){return s?parseInt(s):1}function Ii(s){const e=s.match(Ti);if(!e)return NaN;const t=Oe(e[1]),n=Oe(e[2]),a=Oe(e[3]);return Yi(t,n,a)?t*ye+n*_e+a*1e3:NaN}function Oe(s){return s&&parseFloat(s.replace(",","."))||0}function Bi(s){if(s==="Z")return 0;const e=s.match(Si);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return Wi(n,a)?t*(n*ye+a*_e):NaN}function Fi(s,e,t){const n=new Date(0);n.setUTCFullYear(s,0,4);const a=n.getUTCDay()||7,r=(e-1)*7+t+1-a;return n.setUTCDate(n.getUTCDate()+r),n}const zi=[31,null,31,30,31,30,31,31,30,31,30,31];function xt(s){return s%400===0||s%4===0&&s%100!==0}function Ui(s,e,t){return e>=0&&e<=11&&t>=1&&t<=(zi[e]||(xt(s)?29:28))}function Hi(s,e){return e>=1&&e<=(xt(s)?366:365)}function Ai(s,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Yi(s,e,t){return s===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&s>=0&&s<25}function Wi(s,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const qi={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};St._date.override({_id:"date-fns",formats:function(){return qi},parse:function(s,e){if(s===null||typeof s>"u")return null;const t=typeof s;return t==="number"||s instanceof Date?s=T(s):t==="string"&&(typeof e=="string"?s=ki(s,e,new Date,this.options):s=Pi(s,this.options)),ot(s)?s.getTime():null},format:function(s,e){return Ls(s,e,this.options)},add:function(s,e,t){switch(t){case"millisecond":return ze(s,e);case"second":return mr(s,e);case"minute":return hr(s,e);case"hour":return ur(s,e);case"day":return Me(s,e);case"week":return pr(s,e);case"month":return Fe(s,e);case"quarter":return fr(s,e);case"year":return gr(s,e);default:return s}},diff:function(s,e,t){switch(t){case"millisecond":return Ue(s,e);case"second":return Cr(s,e);case"minute":return br(s,e);case"hour":return wr(s,e);case"day":return at(s,e);case"week":return Lr(s,e);case"month":return dt(s,e);case"quarter":return kr(s,e);case"year":return Mr(s,e);default:return 0}},startOf:function(s,e,t){switch(e){case"second":return Di(s);case"minute":return Mi(s);case"hour":return Li(s);case"day":return Ee(s);case"week":return Q(s);case"isoWeek":return Q(s,{weekStartsOn:+t});case"month":return Pr(s);case"quarter":return Dr(s);case"year":return ct(s);default:return s}},endOf:function(s,e){switch(e){case"second":return Nr(s);case"minute":return $r(s);case"hour":return Tr(s);case"day":return lt(s);case"week":return Sr(s);case"month":return ut(s);case"quarter":return Er(s);case"year":return Or(s);default:return s}}});const ji={id:"daily-uploads",class:"bg-white rounded-lg shadow p-6 mb-8"},Gi={id:"top-users",class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Ri={class:"bg-white rounded-lg shadow p-6"},Zi={class:"bg-white rounded-lg shadow p-6"},Vi={id:"distribution",class:"bg-white rounded-lg shadow p-6 mb-8"},Qi={class:"flex justify-center"},Xi={class:"w-full max-w-2xl"},Ki={id:"file-activity",class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Ji={class:"bg-white rounded-lg shadow p-6"},eo={class:"bg-white rounded-lg shadow p-6"},to={id:"time-activity",class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},no={class:"bg-white rounded-lg shadow p-6"},ro={class:"bg-white rounded-lg shadow p-6"},so={__name:"DashboardCharts",props:{data:{type:Object,required:!0}},setup(s){const e=s,t=$(null),n=$(null),a=$(null),r=$(null),i=$(null),o=$(null),l=$(null),c=$(null);let h={};const d=()=>{const f=(e.data?.dailyUploads||[]).map(p=>new Date(p.date));return f.length?(f.sort((p,g)=>p-g),{min:f[0],max:f[f.length-1]}):null},m=()=>{Object.values(h).forEach(p=>p.destroy()),h={};const f=d();if(t.value&&e.data.dailyUploads&&(h.daily=new X(t.value,{type:"line",data:{labels:e.data.dailyUploads.map(p=>p.date),datasets:[{label:"Uploads",data:e.data.dailyUploads.map(p=>p.uploads),borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!0}},scales:f?{x:{type:"time",time:{unit:"day"},min:f.min,max:f.max}}:{}}})),n.value&&e.data.userContributions){const p=e.data.userContributions.slice(0,10);h.userBar=new X(n.value,{type:"bar",data:{labels:p.map(g=>g.name),datasets:[{label:"Files",data:p.map(g=>g.files),backgroundColor:"#10B981"}]},options:{responsive:!0,maintainAspectRatio:!0,indexAxis:"y"}})}if(a.value&&e.data.userContributions){const p=e.data.userContributions.slice(0,8);h.userPie=new X(a.value,{type:"pie",data:{labels:p.map(g=>g.name),datasets:[{data:p.map(g=>g.files),backgroundColor:["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF6B9D"]}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"right"}}}})}if(r.value&&e.data.sizeDistribution&&(h.size=new X(r.value,{type:"bar",data:{labels:e.data.sizeDistribution.map(p=>p.range),datasets:[{label:"Files",data:e.data.sizeDistribution.map(p=>p.count),backgroundColor:"#F59E0B"}]},options:{responsive:!0,maintainAspectRatio:!0}})),o.value&&e.data.dailyUploads){const p=[...e.data.dailyUploads].sort((g,_)=>_.uploads-g.uploads).slice(0,10);h.topDays=new X(o.value,{type:"bar",data:{labels:p.map(g=>g.date),datasets:[{label:"Uploads",data:p.map(g=>g.uploads),backgroundColor:"#EF4444"}]},options:{responsive:!0,maintainAspectRatio:!0,indexAxis:"y"}})}l.value&&e.data.hourlyDistribution&&(h.hourly=new X(l.value,{type:"bar",data:{labels:e.data.hourlyDistribution.map(p=>`${p.hour}:00`),datasets:[{label:"Uploads",data:e.data.hourlyDistribution.map(p=>p.count),backgroundColor:"#8B5CF6"}]},options:{responsive:!0,maintainAspectRatio:!0}})),c.value&&e.data.monthlyActivity&&(h.monthly=new X(c.value,{type:"line",data:{labels:e.data.monthlyActivity.map(p=>p.month),datasets:[{label:"Uploads",data:e.data.monthlyActivity.map(p=>p.count),borderColor:"#06B6D4",backgroundColor:"rgba(6, 182, 212, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!0}})),i.value&&e.data.cameraData&&(h.camera=new X(i.value,{type:"bar",data:{labels:e.data.cameraData.map(p=>p.model),datasets:[{label:"Photos",data:e.data.cameraData.map(p=>p.count),backgroundColor:"#8B5CF6"}]},options:{responsive:!0,maintainAspectRatio:!0,indexAxis:"y"}}))};return Le(()=>{e.data&&m()}),Ce(()=>e.data,f=>{f&&m()},{deep:!0}),nt(()=>{Object.values(h).forEach(f=>f.destroy()),h={}}),(f,p)=>(M(),D("div",null,[u("div",ji,[p[0]||(p[0]=u("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Daily Upload Activity",-1)),u("canvas",{ref_key:"dailyChart",ref:t},null,512)]),u("div",Gi,[u("div",Ri,[p[1]||(p[1]=u("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Top Contributors (Files)",-1)),u("canvas",{ref_key:"userBarChart",ref:n},null,512)]),u("div",Zi,[p[2]||(p[2]=u("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Top Camera Models",-1)),u("canvas",{ref_key:"cameraChart",ref:i},null,512)])]),u("div",Vi,[p[3]||(p[3]=u("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Contribution Distribution",-1)),u("div",Qi,[u("div",Xi,[u("canvas",{ref_key:"userPieChart",ref:a},null,512)])])]),u("div",Ki,[u("div",Ji,[p[4]||(p[4]=u("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"File Size Distribution",-1)),u("canvas",{ref_key:"sizeChart",ref:r},null,512)]),u("div",eo,[p[5]||(p[5]=u("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Top Upload Days",-1)),u("canvas",{ref_key:"topDaysChart",ref:o},null,512)])]),u("div",to,[u("div",no,[p[6]||(p[6]=u("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Upload Hours Distribution",-1)),u("canvas",{ref_key:"hourlyChart",ref:l},null,512)]),u("div",ro,[p[7]||(p[7]=u("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Monthly Activity",-1)),u("canvas",{ref_key:"monthlyChart",ref:c},null,512)])])]))}},io={class:"bg-white rounded-lg shadow p-6"},oo={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4"},ao={class:"flex items-center gap-3"},lo={class:"overflow-x-auto"},uo={class:"min-w-full divide-y divide-gray-200"},co={class:"bg-white divide-y divide-gray-200"},ho={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},fo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},mo=["href","title"],po={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},go={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_o={__name:"ContributorsTable",props:{userContributions:{type:Array,required:!0}},setup(s){const e=s,t=$(""),n=$("files"),a=$("desc"),r=()=>{a.value=a.value==="desc"?"asc":"desc"},i=d=>`https://commons.wikimedia.org/wiki/User:${encodeURIComponent(d.trim())}`,o=et(()=>{const d=t.value.toLowerCase();let m=(e.userContributions||[]).filter(g=>!d||(g.name||"").toLowerCase().includes(d));const f=n.value,p=a.value==="desc"?-1:1;return m=m.slice().sort((g,_)=>{let y=g[f],P=_[f];return f==="sizeMB"&&(y=parseFloat(y),P=parseFloat(P)),typeof y=="string"&&(y=y.toLowerCase()),typeof P=="string"&&(P=P.toLowerCase()),y<P?-1*p:y>P?1*p:0}),m}),l=(d,m,f="text/plain")=>{const p=new Blob([m],{type:`${f};charset=utf-8`}),g=URL.createObjectURL(p),_=document.createElement("a");_.href=g,_.download=d,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(g)},c=()=>{const m=[["Rank","Username","Files Uploaded","Total Size (MB)"].join(",")];o.value.forEach((f,p)=>{const g=[p+1,f.name,f.files,f.sizeMB];m.push(g.map(_=>typeof _=="string"&&_.includes(",")?`"${_.replace(/"/g,'""')}"`:_).join(","))}),l("contributors.csv",m.join(`
`),"text/csv")},h=()=>{const d=[];d.push('{| class="wikitable sortable"'),d.push("|+ Contributors"),d.push("! Rank !! Username !! Files Uploaded !! Total Size (MB)"),o.value.forEach((f,p)=>{const g=`[[User:${f.name}|${f.name}]]`;d.push("|-"),d.push(`| ${p+1} || ${g} || ${f.files} || ${f.sizeMB}`)}),d.push("|}");const m=d.join(`
`);navigator.clipboard?.writeText(m).catch(()=>{}),l("contributors-wikitable.txt",m,"text/plain")};return(d,m)=>(M(),D("div",io,[u("div",oo,[m[4]||(m[4]=u("h2",{class:"text-xl font-bold text-gray-800"},"Detailed User Contributions",-1)),u("div",ao,[Te(u("input",{"onUpdate:modelValue":m[0]||(m[0]=f=>t.value=f),type:"search",placeholder:"Search userâ€¦",class:"w-56 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wikimedia-blue/30 focus:border-wikimedia-blue"},null,512),[[tt,t.value,void 0,{trim:!0}]]),Te(u("select",{"onUpdate:modelValue":m[1]||(m[1]=f=>n.value=f),class:"px-3 py-2 text-sm border border-gray-300 rounded-lg"},[...m[2]||(m[2]=[u("option",{value:"files"},"Sort by Files",-1),u("option",{value:"sizeMB"},"Sort by Size",-1),u("option",{value:"name"},"Sort by Name",-1)])],512),[[Lt,n.value]]),u("button",{onClick:r,class:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50"},S(a.value==="desc"?"Desc":"Asc"),1),m[3]||(m[3]=u("div",{class:"h-6 w-px bg-gray-200"},null,-1)),u("button",{onClick:c,class:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50"},"Export CSV"),u("button",{onClick:h,class:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50"},"Copy Wikitable")])]),u("div",lo,[u("table",uo,[m[5]||(m[5]=u("thead",{class:"bg-gray-50"},[u("tr",null,[u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rank"),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Username"),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Files Uploaded"),u("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Size (MB)")])],-1)),u("tbody",co,[(M(!0),D(Se,null,$e(o.value,(f,p)=>(M(),D("tr",{key:f.name,class:"hover:bg-gray-50"},[u("td",ho,S(p+1),1),u("td",fo,[u("a",{href:i(f.name),target:"_blank",rel:"noopener noreferrer",class:"text-wikimedia-blue hover:text-wikimedia-green transition-colors duration-200 font-medium hover:underline",title:`View ${f.name}'s user page on Wikimedia Commons`},S(f.name),9,mo)]),u("td",po,S(f.files),1),u("td",go,S(f.sizeMB),1)]))),128))])])])]))}},yo={},vo={class:"bg-white border-t border-gray-200"},wo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},bo={class:"mt-6 pt-6 border-t border-gray-200 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},xo={class:"text-xs text-gray-500"};function ko(s,e){return M(),D("footer",vo,[u("div",wo,[e[1]||(e[1]=te('<div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-gradient-to-br from-wikimedia-blue to-wikimedia-green flex items-center justify-center"><svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"></path></svg></div><div><p class="text-sm font-semibold text-gray-900">MIST by <a href="https://w.wiki/tN" target="_blank">Ranjithsiji</a></p><p class="text-xs text-gray-500">Media Statistics and Analytics Dashboard for Wikimedia Commons Campaigns</p></div></div><div class="grid grid-cols-2 sm:grid-cols-4 gap-2 text-sm"><a href="#" class="text-gray-600 hover:text-wikimedia-blue">About</a><a href="#" class="text-gray-600 hover:text-wikimedia-blue">Documentation</a><a href="https://commons.wikimedia.org" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-wikimedia-blue">Wikimedia Commons</a><a href="https://github.com/ranjithsiji/mist-commons" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-wikimedia-blue">GitHub</a></div></div>',1)),u("div",bo,[u("p",xo,"Â© "+S(new Date().getFullYear())+" MIST. Built with Vue.js and TailwindCSS.",1),e[0]||(e[0]=u("div",{class:"flex items-center gap-4 text-xs text-gray-500"},[u("span",null,[u("a",{href:"https://gitlab.wikimedia.org/toolforge-repos/mist-tools",target:"_blank"}," Source Code ")]),u("span",null,[u("a",{href:"https://github.com/ranjithsiji/mist-commons/blob/main/LICENSE",target:"_blank"},"License")]),u("span",null,[u("a",{href:"https://w.wiki/t9",target:"_blank"},"Wikimedians of Kerala User Group")])],-1))])])])}const Co=Be(yo,[["render",ko]]),Je="/api",Lo="60000";function Mo(){const s=$(!1),e=$(""),t=async(i,o={})=>{const l=new AbortController,c=setTimeout(()=>l.abort(),Lo);try{const h=await fetch(i,{...o,signal:l.signal,headers:{"Content-Type":"application/json",...o.headers}});return clearTimeout(c),h}catch(h){throw clearTimeout(c),h.name==="AbortError"?new Error("Request timeout - server may be unavailable"):h}};return{loading:s,error:e,fetchCategories:async()=>{s.value=!0,e.value="";try{const i=await t(`${Je}/categories.php`);if(!i.ok){const l=await i.text();throw new Error(`HTTP ${i.status}: ${i.statusText}${l?` - ${l}`:""}`)}const o=await i.json();if(!o.success)throw new Error(o.error||"API returned success: false");return o.categories||[]}catch(i){const o=`Failed to load categories: ${i.message}`;throw e.value=o,new Error(o)}finally{s.value=!1}},fetchDashboardData:async(i,o=!1,l={})=>{if(!i)throw new Error("Category name is required");s.value=!0,e.value="";try{const c=new URLSearchParams({category:i});o&&c.append("custom","1"),l.startDate&&c.append("start",l.startDate),l.endDate&&c.append("end",l.endDate);const h=`${Je}/dashboard.php?${c.toString()}`,d=await t(h);if(!d.ok){const f=await d.text();throw new Error(`HTTP ${d.status}: ${d.statusText}${f?` - ${f}`:""}`)}const m=await d.json();if(!m.success)throw new Error(m.error||"Failed to fetch dashboard data");return m}catch(c){const h=`Failed to load dashboard data: ${c.message}`;throw e.value=h,new Error(h)}finally{s.value=!1}},validateCategory:async i=>{try{const o="https://commons.wikimedia.org/w/api.php";let l=i;l.startsWith("Category:")||(l=`Category:${i}`);const c=new URLSearchParams({action:"query",format:"json",origin:"*",titles:l,prop:"categoryinfo|info",formatversion:"2"}),d=await(await fetch(`${o}?${c}`)).json();if(d.query&&d.query.pages&&d.query.pages.length>0){const m=d.query.pages[0];return{exists:!m.missing,pageCount:m.categoryinfo?m.categoryinfo.pages:0,title:m.title}}return{exists:!1,pageCount:0,title:l}}catch(o){return{exists:!1,pageCount:0,title:i,error:o.message}}}}}function Do(){const s=t=>{const n=t.rows||[];if(n.length===0)return console.warn("No data rows found in API response"),e();const a=new Set(n.map(C=>C[7])).size,r=n.length,i=n.reduce((C,w)=>C+(parseInt(w[5])||0),0),o=new Set(n.map(C=>C[3])).size,l=[];let c=0;n.forEach(C=>{try{const w=C[6];if(w&&w!=="{}"){const x=JSON.parse(w),v=x?.data?.GPSLatitude,O=x?.data?.GPSLongitude;if(v&&O&&!isNaN(parseFloat(v))&&!isNaN(parseFloat(O))){const q=parseFloat(v),j=parseFloat(O);if(q>=-90&&q<=90&&j>=-180&&j<=180){c++;const k=C[2],b=C[3],B=b?`${b.slice(0,4)}-${b.slice(4,6)}-${b.slice(6,8)}`:"Unknown";l.push({lat:q,lon:j,filename:k,author:C[7]||"Unknown",date:B,thumbnail:`https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(k)}?width=300`,commonsUrl:`https://commons.wikimedia.org/wiki/File:${encodeURIComponent(k)}`})}}}}catch{}}),console.log(`Found ${l.length} valid GPS coordinates from ${c} geotagged files`);const h={};n.forEach(C=>{const w=C[7];h[w]||(h[w]={count:0,size:0}),h[w].count++,h[w].size+=parseInt(C[5])||0});const d=Object.entries(h).map(([C,w])=>({name:C,files:w.count,sizeMB:(w.size/(1024*1024)).toFixed(2)})).sort((C,w)=>w.files-C.files),m={};n.forEach(C=>{const w=C[3];if(w&&w.length===8){const x=`${w.slice(0,4)}-${w.slice(4,6)}-${w.slice(6,8)}`;m[x]=(m[x]||0)+1}});const f=Object.entries(m).map(([C,w])=>({date:C,uploads:w})).sort((C,w)=>C.date.localeCompare(w.date)),p=Array.from({length:24},(C,w)=>({hour:w,count:0}));n.forEach(C=>{const w=C[4];if(w&&w.length>=10)try{const x=parseInt(w.slice(8,10));x>=0&&x<=23&&p[x].count++}catch{}});const g={};n.forEach(C=>{const w=C[3];if(w&&w.length>=6){const x=`${w.slice(0,4)}-${w.slice(4,6)}`;g[x]=(g[x]||0)+1}});const _=Object.entries(g).map(([C,w])=>({month:C,count:w})).sort((C,w)=>C.month.localeCompare(w.month)),y={"< 1 MB":0,"1-5 MB":0,"5-10 MB":0,"10-15 MB":0,"> 15 MB":0};n.forEach(C=>{const w=(parseInt(C[5])||0)/1048576;w<1?y["< 1 MB"]++:w<5?y["1-5 MB"]++:w<10?y["5-10 MB"]++:w<15?y["10-15 MB"]++:y["> 15 MB"]++});const P=Object.entries(y).map(([C,w])=>({range:C,count:w})).filter(C=>C.count>0),E={};n.forEach(C=>{try{const w=C[6];if(w&&w!=="{}"){const v=JSON.parse(w)?.data?.Model;v&&v.trim()!==""&&(E[v]=(E[v]||0)+1)}}catch{}});let R=0;n.forEach(C=>{const w=C[2].toUpperCase();let x=!1;try{JSON.parse(C[6]||"{}")?.data?.Model&&(x=!0)}catch{}x||(w.includes("DSC_")?E["Nikon DSLR"]=(E["Nikon DSLR"]||0)+1:w.includes("IMG_")?E["Canon DSLR"]=(E["Canon DSLR"]||0)+1:w.includes("IMG")&&w.includes("202")?E.Smartphone=(E.Smartphone||0)+1:R++)}),R>0&&(E["Unknown Camera"]=R);const W=Object.entries(E).map(([C,w])=>({model:C,count:w})).sort((C,w)=>w.count-C.count).slice(0,10),F={stats:{uniqueUsers:a,totalFiles:r,uniqueDates:o,totalSize:i,avgFileSize:r>0?i/r:0,geotaggedFiles:c},data:{userContributions:d,dailyUploads:f,hourlyDistribution:p,monthlyActivity:_,sizeDistribution:P,cameraData:W},geoData:l};return console.log("Processed data summary:",{stats:{users:F.stats.uniqueUsers,files:F.stats.totalFiles,dates:F.stats.uniqueDates,sizeMB:(F.stats.totalSize/1024/1024).toFixed(2),geotagged:F.stats.geotaggedFiles,validGeoPoints:F.geoData.length},distributions:{contributors:F.data.userContributions.length,sizeBuckets:F.data.sizeDistribution.length,cameras:F.data.cameraData.length,uploadDays:F.data.dailyUploads.length}}),F},e=()=>({stats:{uniqueUsers:0,totalFiles:0,uniqueDates:0,totalSize:0,avgFileSize:0,geotaggedFiles:0},data:{userContributions:[],dailyUploads:[],hourlyDistribution:Array.from({length:24},(t,n)=>({hour:n,count:0})),monthlyActivity:[],sizeDistribution:[],cameraData:[]},geoData:[]});return{processData:s}}const Po={class:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex flex-col"},Oo={key:1,class:"flex-1 bg-gradient-to-br from-blue-50 to-green-50 flex flex-col"},To={class:"bg-white/90 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50"},So={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$o={class:"flex justify-between items-center h-16"},Eo={class:"flex items-center space-x-4"},No={class:"text-sm text-gray-500 hidden sm:block"},Io={class:"flex items-center space-x-4"},Bo={class:"hidden md:flex items-center space-x-6"},Fo={key:0,href:"#map",class:"text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200"},zo=["disabled"],Uo={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ho={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ao={class:"md:hidden"},Yo={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wo={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},qo={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},jo={key:0,class:"md:hidden border-t border-gray-200 py-4"},Go={class:"flex flex-col space-y-2"},Ro={class:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full"},Zo={class:"mb-8 animate-fade-in"},Vo={class:"text-3xl md:text-4xl font-bold text-gray-900 mb-3"},Qo={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Xo={class:"text-lg text-gray-600 leading-relaxed"},Ko=["href"],Jo={class:"flex items-center space-x-2"},ea={class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ta={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},na={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},ra={key:0,class:"mt-2 text-sm text-gray-600"},sa={key:0},ia={key:1},oa={key:0,class:"bg-red-50 border-l-4 border-red-400 text-red-700 p-6 rounded-xl mb-8 shadow-lg animate-slide-up"},aa={class:"flex items-center"},la={class:"text-sm mt-1"},ua={key:0,class:"text-sm mt-2"},da={key:1,class:"text-center py-24 animate-fade-in"},ca={class:"text-gray-600 mb-2"},ha={key:2,class:"space-y-8 animate-slide-up"},fa={id:"overview",class:"scroll-mt-20"},ma={key:0,id:"map",class:"scroll-mt-20"},pa={id:"activity",class:"scroll-mt-20"},ga={id:"contributors",class:"scroll-mt-20"},_a={__name:"App",setup(s){const{loading:e,error:t,fetchCategories:n,fetchDashboardData:a,validateCategory:r}=Mo(),{processData:i}=Do(),o=$([]),l=$(null),c=$(null),h=$(null),d=$([]),m=$(!1),f=$(!1),p=$(null),g=$(!1),_=k=>k.replace(/^Category:/i,"").replace(/\s+/g,"_"),y=k=>k.replace(/^Category:/i,"").replace(/_/g," "),P=k=>_(k),E=k=>{const b=k.startDate||null;let B=k.endDate||null;return B&&B.toUpperCase&&B.toUpperCase()==="TODAY"&&(B=new Date().toISOString().slice(0,10)),{startDate:b,endDate:B}},R=async()=>{m.value=!0;try{const k=await n();o.value=k}catch(k){console.error("Error loading categories:",k)}finally{m.value=!1}},W=k=>{l.value={...k,displayName:y(k.categoryName||k.name),normalizedName:_(k.categoryName||k.name),urlSlug:P(k.categoryName||k.name)},p.value=null,f.value=!1,w(l.value.urlSlug);const b=E(k);v(l.value.normalizedName,!1,b)},F=async k=>{l.value={...k,displayName:y(k.categoryName||k.name),normalizedName:_(k.categoryName||k.name),urlSlug:P(k.categoryName||k.name),isCustom:!0},f.value=!1,w(l.value.urlSlug);try{p.value=await r(l.value.displayName)}catch(b){p.value={exists:!1,error:b.message}}v(l.value.normalizedName,!0,E(k))},C=()=>{l.value=null,c.value=null,h.value=null,d.value=[],p.value=null,f.value=!1,g.value=!1,w("")},w=k=>{const b=k?`?category=${encodeURIComponent(k)}`:window.location.pathname;window.history.pushState({},"",b)},x=()=>{let b=new URLSearchParams(window.location.search).get("category");if(b){b=decodeURIComponent(b).replace(/^Category:/i,"");const B=b.replace(/\s+/g,"_"),ie=o.value.find(qe=>P(qe.categoryName||qe.name)===B);if(ie){W(ie);return}const le={id:`custom-${Date.now()}`,name:B,categoryName:B,description:`Custom analysis for ${y(B)}`,icon:"ðŸ”",year:"Custom",color1:"#8B5CF6",color2:"#7C3AED",isCustom:!0};F(le)}},v=async(k,b=!1,B={})=>{try{const ie=await a(k,b,B),le=i(ie);h.value=le.stats,c.value=le.data,d.value=le.geoData}catch(ie){console.error("Error fetching data:",ie)}},O=()=>{if(l.value){const k=E(l.value);v(l.value.normalizedName,l.value.isCustom,k)}},q=()=>l.value?`https://commons.wikimedia.org/wiki/Category:${l.value.normalizedName}`:"#",j=async()=>{if(!l.value)return;const k=window.location.href;try{await navigator.clipboard.writeText(k),g.value=!0,setTimeout(()=>{g.value=!1},2e3)}catch{const B=document.createElement("textarea");B.value=k,document.body.appendChild(B),B.select();try{document.execCommand("copy"),g.value=!0,setTimeout(()=>{g.value=!1},2e3)}catch{}document.body.removeChild(B)}};return Le(()=>{R()}),Ce(o,()=>{o.value.length>0&&x()}),(k,b)=>(M(),D("div",Po,[l.value?(M(),D("div",Oo,[u("header",To,[u("div",So,[u("div",$o,[u("div",Eo,[u("button",{onClick:C,class:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-wikimedia-blue to-wikimedia-green rounded-lg hover:shadow-lg transition-all duration-200",title:"Back to Categories"},[...b[5]||(b[5]=[u("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),u("div",null,[b[6]||(b[6]=u("h1",{class:"text-xl font-bold text-gray-900"},"MIST : Category Analytics",-1)),u("p",No,S(l.value.isCustom?"Custom Category Analytics Dashboard":"Wikimedia Commons Analytics Dashboard"),1)])]),u("div",Io,[u("nav",Bo,[b[7]||(b[7]=u("a",{href:"#overview",class:"text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200"},"Overview",-1)),d.value.length>0?(M(),D("a",Fo,"Map")):G("",!0),b[8]||(b[8]=u("a",{href:"#activity",class:"text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200"},"Activity",-1)),b[9]||(b[9]=u("a",{href:"#contributors",class:"text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200"},"Contributors",-1))]),u("button",{onClick:O,disabled:ee(e),class:"px-4 py-2 bg-gradient-to-r from-wikimedia-blue to-wikimedia-green text-white rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center text-sm font-medium"},[ee(e)?(M(),D("svg",Uo,[...b[10]||(b[10]=[u("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),u("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(M(),D("svg",Ho,[...b[11]||(b[11]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),ge(" "+S(ee(e)?"Refreshing...":"Refresh"),1)],8,zo),u("div",Ao,[u("button",{onClick:b[0]||(b[0]=B=>f.value=!f.value),class:"text-gray-700 hover:text-wikimedia-blue p-2"},[(M(),D("svg",Yo,[f.value?(M(),D("path",qo)):(M(),D("path",Wo))]))])])])]),f.value?(M(),D("div",jo,[u("nav",Go,[u("a",{href:"#overview",onClick:b[1]||(b[1]=B=>f.value=!1),class:"text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200"},"Overview"),d.value.length>0?(M(),D("a",{key:0,href:"#map",onClick:b[2]||(b[2]=B=>f.value=!1),class:"text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200"},"Map")):G("",!0),u("a",{href:"#activity",onClick:b[3]||(b[3]=B=>f.value=!1),class:"text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200"},"Activity"),u("a",{href:"#contributors",onClick:b[4]||(b[4]=B=>f.value=!1),class:"text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200"},"Contributors")])])):G("",!0)])]),u("main",Ro,[u("div",Zo,[u("h2",Vo,S(l.value.displayName)+" Analytics ",1),u("div",Qo,[u("p",Xo,[u("a",{href:q(),target:"_blank",rel:"noopener noreferrer",class:"text-wikimedia-blue hover:text-wikimedia-green transition-colors duration-200"}," View Category on Wikimedia Commons ",8,Ko)]),u("div",Jo,[u("button",{onClick:j,class:me(["inline-flex items-center px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors duration-200",{"bg-green-100 text-green-700":g.value}])},[(M(),D("svg",ea,[g.value?(M(),D("path",na)):(M(),D("path",ta))])),ge(" "+S(g.value?"Copied!":"Share URL"),1)],2)])]),l.value.startDate||l.value.endDate?(M(),D("div",ra,[l.value.startDate?(M(),D("span",sa,"From "+S(l.value.startDate),1)):G("",!0),l.value.endDate?(M(),D("span",ia," to "+S(l.value.endDate),1)):G("",!0)])):G("",!0)]),ee(t)?(M(),D("div",oa,[u("div",aa,[b[14]||(b[14]=u("svg",{class:"w-6 h-6 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[u("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),u("div",null,[b[13]||(b[13]=u("h3",{class:"font-medium"},"Error Loading Data",-1)),u("p",la,S(ee(t)),1),l.value.isCustom&&!p.value?.exists?(M(),D("div",ua,[...b[12]||(b[12]=[u("p",null,"This category may not exist on Wikimedia Commons.",-1),u("p",null,"Please check the category name and try again.",-1)])])):G("",!0)])])])):G("",!0),ee(e)&&!c.value?(M(),D("div",da,[b[15]||(b[15]=u("div",{class:"relative inline-block mb-8"},[u("div",{class:"w-20 h-20 border-4 border-wikimedia-blue/20 border-t-wikimedia-blue rounded-full animate-spin"}),u("div",{class:"absolute inset-0 w-20 h-20 border-4 border-transparent border-r-wikimedia-green rounded-full animate-spin",style:{"animation-delay":"-0.5s","animation-direction":"reverse"}})],-1)),b[16]||(b[16]=u("h3",{class:"text-2xl font-semibold text-gray-700 mb-4"},"Loading Dashboard Data",-1)),u("p",ca,S(l.value.isCustom?"Analyzing custom category from Wikimedia Commons...":"Fetching analytics from Wikimedia Commons..."),1),b[17]||(b[17]=u("div",{class:"flex justify-center items-center space-x-2 text-sm text-gray-500"},[u("div",{class:"w-2 h-2 bg-wikimedia-blue rounded-full animate-bounce"}),u("div",{class:"w-2 h-2 bg-wikimedia-green rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),u("div",{class:"w-2 h-2 bg-wikimedia-orange rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})],-1))])):G("",!0),c.value&&h.value?(M(),D("div",ha,[u("div",fa,[ue(Vn,{stats:h.value},null,8,["stats"])]),d.value.length>0?(M(),D("div",ma,[ue(or,{"geo-data":d.value},null,8,["geo-data"])])):G("",!0),u("div",pa,[ue(so,{data:c.value},null,8,["data"])]),u("div",ga,[ue(_o,{"user-contributions":c.value.userContributions},null,8,["user-contributions"])])])):G("",!0)])])):(M(),Mt(On,{key:0,categories:o.value,loading:m.value,error:ee(t),onSelect:W,onCustom:F},null,8,["categories","loading","error"])),ue(Co)]))}},We=Dt(_a);We.config.errorHandler=(s,e,t)=>{console.error("Global error:",s),console.error("Error info:",t),console.error("Component:",e)};We.config.warnHandler=(s,e,t)=>{console.warn("Warning:",s),console.warn("Trace:",t)};We.mount("#app");console.log("Wikimedia Commons Dashboard initialized");console.log("Environment:","production");
//# sourceMappingURL=index-DL-_T1O1.js.map
