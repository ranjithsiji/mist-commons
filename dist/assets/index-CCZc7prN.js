import{r as P,o as N,a as re,c as M,b as k,d as o,e as D,f as A,w as H,v as te,g as F,h as R,F as q,i as W,j as Z,t as B,n as T,k as X,l as ne,m as Q,p as ie,q as ae,s as le,u as Y,x as G,y as j,z as de}from"./vendor-C2mC6PzU.js";import{r as ue,g as ce}from"./maps-zdHhRoWp.js";import{C as E,r as he}from"./charts-Zj-L_LRF.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))h(v);new MutationObserver(v=>{for(const e of v)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function x(v){const e={};return v.integrity&&(e.integrity=v.integrity),v.referrerPolicy&&(e.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?e.credentials="include":v.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function h(v){if(v.ep)return;v.ep=!0;const e=x(v);fetch(v.href,e)}})();const K=(S,f)=>{const x=S.__vccOpts||S;for(const[h,v]of f)x[h]=v;return x},me={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50"},fe={class:"bg-white/90 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50"},pe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ge={class:"flex justify-between items-center h-16"},_e={class:"md:hidden"},ve={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ye={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},be={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},xe={key:0,class:"md:hidden border-t border-gray-200 py-4"},we={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Ce={class:"mb-16 animate-fade-in"},ke={class:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-gray-100 p-6 max-w-3xl mx-auto"},Le={class:"relative"},Me={class:"flex flex-col md:flex-row gap-3"},Se={class:"flex-1 relative"},$e=["onKeydown"],Be={key:0,class:"absolute right-4 top-1/2 transform -translate-y-1/2"},Pe={key:1,class:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},ze=["onClick","onMouseenter"],Oe={class:"font-medium"},De=["disabled"],Ue={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ee={key:1,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ae={key:0,class:"bg-red-50 border-l-4 border-red-400 text-red-700 p-6 rounded-lg mb-8 max-w-3xl mx-auto shadow-lg animate-slide-up"},je={class:"flex items-center"},Ie={class:"font-medium"},Te={key:1,class:"text-center py-20 animate-fade-in"},Fe={key:2,class:"animate-slide-up"},Ge={class:"text-center mb-12"},Ze={class:"text-gray-600 text-lg"},Ne={class:"space-y-6"},Re=["onClick"],Ve={class:"flex items-center p-6"},He={class:"text-2xl"},qe={class:"flex-1 min-w-0"},We={class:"flex items-start justify-between"},Qe={class:"flex-1"},Ke={class:"text-xl font-bold text-gray-800 mb-2 group-hover:text-wikimedia-blue transition-colors duration-300"},Je={class:"text-gray-600 text-sm mb-3 line-clamp-2 leading-relaxed"},Xe={class:"flex items-center space-x-3"},Ye={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700"},et={key:3,class:"text-center py-20 animate-fade-in"},tt={__name:"CoverPage",props:{categories:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["select","custom"],setup(S,{emit:f}){const x=f,h=P(!1),v=P(""),e=P([]),t=P(!1),i=P(!1),s=P(-1),l=P(""),d=P(null);let r=null;const n=()=>{const b=v.value.trim();if(b.length<3){t.value=!1,e.value=[];return}r&&clearTimeout(r),r=setTimeout(()=>{a(b)},300)},a=async b=>{if(!(!b||b.length<3)){i.value=!0,l.value="";try{let y=b;y.toLowerCase().startsWith("category:")||(y=`Category:${b}`);const C="https://commons.wikimedia.org/w/api.php",w=new URLSearchParams({action:"query",format:"json",origin:"*",list:"search",srnamespace:"14",srsearch:y,srlimit:"10",srprop:"size|wordcount|timestamp",formatversion:"2"}),z=await fetch(`${C}?${w}`);if(!z.ok)throw new Error(`HTTP ${z.status}: ${z.statusText}`);const O=await z.json();if(O.error)throw new Error(O.error.info||"API Error");if(O.query&&O.query.search&&O.query.search.length>0){const se=O.query.search.map(oe=>oe.title);await c(se)}else e.value=[],t.value=!1}catch(y){console.error("Category search error:",y),l.value=`Failed to search categories: ${y.message}`,e.value=[],t.value=!1}finally{i.value=!1}}},c=async b=>{try{const y="https://commons.wikimedia.org/w/api.php",C=new URLSearchParams({action:"query",format:"json",origin:"*",titles:b.join("|"),prop:"categoryinfo",formatversion:"2"}),z=await(await fetch(`${y}?${C}`)).json();z.query&&z.query.pages&&(e.value=z.query.pages.filter(O=>!O.missing),t.value=e.value.length>0,s.value=-1)}catch(y){console.error("Category info error:",y)}},u=b=>{!t.value||e.value.length===0||(s.value+=b,s.value<-1?s.value=e.value.length-1:s.value>=e.value.length&&(s.value=-1))},g=()=>{s.value>=0&&s.value<e.value.length?m(e.value[s.value]):v.value.trim()&&_()},m=b=>{v.value=b.title,t.value=!1,e.value=[],s.value=-1,ne(()=>{d.value&&d.value.focus()})},$=()=>{t.value=!1,s.value=-1},_=()=>{const b=v.value.trim();if(!b)return;const y={id:`custom-${Date.now()}`,name:b.replace(/\ /g,"_").replace("Category:",""),slug:b.replace(/\ /g,"_"),description:`Custom analysis for ${b}`,categoryName:b.startsWith("Category:")?b.substring(9):b,icon:"ðŸ”",year:"Custom",color1:"#8B5CF6",color2:"#7C3AED",isCustom:!0};console.log(y),$(),x("custom",y)},p=b=>{b.target.closest(".relative")||$()};return N(()=>{document.addEventListener("click",p)}),re(()=>{document.removeEventListener("click",p),r&&clearTimeout(r)}),(b,y)=>(k(),M("div",me,[o("header",fe,[o("div",pe,[o("div",ge,[y[5]||(y[5]=A('<div class="flex items-center space-x-4" data-v-3bc7b2ab><div class="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-wikimedia-blue to-wikimedia-green rounded-lg" data-v-3bc7b2ab><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24" data-v-3bc7b2ab><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" data-v-3bc7b2ab></path></svg></div><div data-v-3bc7b2ab><h1 class="text-xl font-bold text-gray-900" data-v-3bc7b2ab>Commons Analytics</h1><p class="text-sm text-gray-500 hidden sm:block" data-v-3bc7b2ab>Dashboard</p></div></div><nav class="hidden md:flex items-center space-x-8" data-v-3bc7b2ab><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200" data-v-3bc7b2ab>Home</a><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200" data-v-3bc7b2ab>About</a><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200" data-v-3bc7b2ab>Documentation</a><a href="https://commons.wikimedia.org" target="_blank" rel="noopener noreferrer" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200" data-v-3bc7b2ab>Commons</a></nav>',2)),o("div",_e,[o("button",{onClick:y[0]||(y[0]=C=>h.value=!h.value),class:"text-gray-700 hover:text-wikimedia-blue p-2"},[(k(),M("svg",ve,[h.value?(k(),M("path",be)):(k(),M("path",ye))]))])])]),h.value?(k(),M("div",xe,[...y[6]||(y[6]=[A('<nav class="flex flex-col space-y-2" data-v-3bc7b2ab><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200" data-v-3bc7b2ab>Home</a><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200" data-v-3bc7b2ab>About</a><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200" data-v-3bc7b2ab>Documentation</a><a href="https://commons.wikimedia.org" target="_blank" rel="noopener noreferrer" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200" data-v-3bc7b2ab>Commons</a></nav>',1)])])):D("",!0)])]),o("main",we,[y[17]||(y[17]=o("div",{class:"text-center mb-16 animate-fade-in"},[o("h2",{class:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-wikimedia-blue via-wikimedia-green to-wikimedia-blue bg-clip-text text-transparent mb-4 leading-tight"}," Wikimedia Commons Analytics "),o("p",{class:"text-lg md:text-xl text-gray-600 mb-6 max-w-3xl mx-auto leading-relaxed"}," Explore contest statistics, contributor insights, and media analytics from Wikimedia Commons photography contests "),o("p",{class:"text-gray-500 max-w-2xl mx-auto"}," Select a contest category below or search for a custom category ")],-1)),o("div",Ce,[o("div",ke,[y[11]||(y[11]=o("div",{class:"text-center mb-4"},[o("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Custom Category Search"),o("p",{class:"text-gray-600"},"Search for any Wikimedia Commons category to analyze")],-1)),o("div",Le,[o("div",Me,[o("div",Se,[H(o("input",{ref_key:"categoryInput",ref:d,"onUpdate:modelValue":y[1]||(y[1]=C=>v.value=C),onInput:n,onKeydown:[y[2]||(y[2]=F(R(C=>u(1),["prevent"]),["down"])),y[3]||(y[3]=F(R(C=>u(-1),["prevent"]),["up"])),F(R(g,["prevent"]),["enter"]),F($,["escape"])],onFocus:y[4]||(y[4]=C=>t.value=v.value.length>=3),type:"text",placeholder:"Start typing a category name (e.g., 'Category:Images from...')",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-wikimedia-blue focus:border-transparent transition-all duration-200 text-gray-900 placeholder-gray-500"},null,40,$e),[[te,v.value]]),i.value?(k(),M("div",Be,[...y[7]||(y[7]=[o("div",{class:"w-5 h-5 border-2 border-wikimedia-blue/20 border-t-wikimedia-blue rounded-full animate-spin"},null,-1)])])):D("",!0),t.value&&e.value.length>0?(k(),M("div",Pe,[(k(!0),M(q,null,W(e.value,(C,w)=>(k(),M("div",{key:C.title,onClick:z=>m(C),onMouseenter:z=>s.value=w,class:T(["px-4 py-3 cursor-pointer transition-colors duration-150 border-b border-gray-100 last:border-b-0",s.value===w?"bg-wikimedia-blue text-white":"hover:bg-gray-50 text-gray-900"])},[o("div",Oe,B(C.title.replace("Category:","")),1),C.categoryinfo&&C.categoryinfo.pages?(k(),M("div",{key:0,class:T(["text-sm mt-1",s.value===w?"text-blue-100":"text-gray-500"])},B(C.categoryinfo.pages)+" pages ",3)):D("",!0)],42,ze))),128))])):D("",!0)]),o("button",{onClick:_,disabled:!v.value.trim()||i.value,class:"px-6 py-3 bg-gradient-to-r from-wikimedia-blue to-wikimedia-green text-white rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center font-medium"},[i.value?(k(),M("svg",Ue,[...y[8]||(y[8]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(k(),M("svg",Ee,[...y[9]||(y[9]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])])),Z(" "+B(i.value?"Searching...":"View Statistics"),1)],8,De)]),y[10]||(y[10]=o("div",{class:"mt-3 text-sm text-gray-500 text-center"},[o("p",null,'Search for categories like "Images from Wiki Loves Monuments 2023" or browse suggestions below')],-1))])])]),S.error||l.value?(k(),M("div",Ae,[o("div",je,[y[12]||(y[12]=o("svg",{class:"w-6 h-6 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),o("span",Ie,B(S.error||l.value),1)])])):D("",!0),S.loading?(k(),M("div",Te,[...y[13]||(y[13]=[A('<div class="relative inline-block" data-v-3bc7b2ab><div class="w-16 h-16 border-4 border-wikimedia-blue/20 border-t-wikimedia-blue rounded-full animate-spin" data-v-3bc7b2ab></div><div class="absolute inset-0 w-16 h-16 border-4 border-transparent border-r-wikimedia-green rounded-full animate-spin" style="animation-delay:-0.5s;animation-direction:reverse;" data-v-3bc7b2ab></div></div><p class="mt-6 text-xl text-gray-600 font-medium" data-v-3bc7b2ab>Loading categories...</p><p class="mt-2 text-gray-500" data-v-3bc7b2ab>Fetching contest data from Wikimedia Commons</p>',3)])])):S.categories.length>0?(k(),M("div",Fe,[o("div",Ge,[y[14]||(y[14]=o("h3",{class:"text-3xl font-bold text-gray-800 mb-3"},"Featured Contest Categories",-1)),o("p",Ze,B(S.categories.length)+" contest"+B(S.categories.length!==1?"s":"")+" available for analysis",1)]),o("div",Ne,[(k(!0),M(q,null,W(S.categories,(C,w)=>(k(),M("div",{key:C.id,onClick:z=>b.$emit("select",C),class:"group bg-white/80 backdrop-blur-sm rounded-xl shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:-translate-y-1 border border-gray-100 overflow-hidden",style:X({animationDelay:`${w*100}ms`})},[o("div",Ve,[o("div",{class:"flex items-center justify-center w-16 h-16 rounded-lg mr-6 flex-shrink-0 group-hover:scale-110 transition-transform duration-300",style:X({background:`linear-gradient(135deg, ${C.color1||"#0645ad"} 0%, ${C.color2||"#00af89"} 100%)`})},[o("span",He,B(C.icon||"ðŸ“Š"),1)],4),o("div",qe,[o("div",We,[o("div",Qe,[o("h3",Ke,B(C.name),1),o("p",Je,B(C.description),1),o("div",Xe,[o("span",Ye,B(C.year||"Contest"),1),y[15]||(y[15]=o("div",{class:"flex items-center text-wikimedia-blue font-medium text-sm group-hover:translate-x-1 transition-transform duration-300"},[o("span",{class:"mr-1"},"View Analytics"),o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})])],-1))])])])])])],12,Re))),128))])])):S.loading?D("",!0):(k(),M("div",et,[...y[16]||(y[16]=[A('<div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6" data-v-3bc7b2ab><svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3bc7b2ab><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-3bc7b2ab></path></svg></div><h3 class="text-xl font-semibold text-gray-700 mb-2" data-v-3bc7b2ab>No Categories Available</h3><p class="text-gray-500" data-v-3bc7b2ab>No contest categories found. Use the custom search above to find categories.</p>',3)])])),y[18]||(y[18]=A('<footer class="text-center mt-20 pt-12 border-t border-gray-200 animate-fade-in" data-v-3bc7b2ab><div class="flex items-center justify-center space-x-8 mb-6" data-v-3bc7b2ab><div class="flex items-center space-x-2 text-gray-600" data-v-3bc7b2ab><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-3bc7b2ab><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" data-v-3bc7b2ab></path></svg><span class="font-medium" data-v-3bc7b2ab>Open Source</span></div><div class="flex items-center space-x-2 text-gray-600" data-v-3bc7b2ab><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-3bc7b2ab><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" data-v-3bc7b2ab></path></svg><span class="font-medium" data-v-3bc7b2ab>Community Driven</span></div><div class="flex items-center space-x-2 text-gray-600" data-v-3bc7b2ab><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-3bc7b2ab><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" data-v-3bc7b2ab></path></svg><span class="font-medium" data-v-3bc7b2ab>Global Impact</span></div></div><p class="text-gray-500 text-sm mb-2" data-v-3bc7b2ab> Powered by <span class="font-semibold text-wikimedia-blue" data-v-3bc7b2ab>Wikimedia Commons</span> â€¢ Built with <span class="font-semibold text-wikimedia-green" data-v-3bc7b2ab>Vue.js</span> &amp; <span class="font-semibold text-wikimedia-purple" data-v-3bc7b2ab>TailwindCSS</span></p><p class="text-gray-400 text-xs" data-v-3bc7b2ab> Analyzing media contributions from the world&#39;s largest free media repository </p></footer>',1))])]))}},it=K(tt,[["__scopeId","data-v-3bc7b2ab"]]),st={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 mb-8"},ot={class:"bg-white rounded-lg shadow p-6"},rt={class:"flex items-center justify-between"},nt={class:"text-3xl font-bold text-blue-600"},at={class:"bg-white rounded-lg shadow p-6"},lt={class:"flex items-center justify-between"},dt={class:"text-3xl font-bold text-green-600"},ut={class:"bg-white rounded-lg shadow p-6"},ct={class:"flex items-center justify-between"},ht={class:"text-3xl font-bold text-purple-600"},mt={class:"bg-white rounded-lg shadow p-6"},ft={class:"flex items-center justify-between"},pt={class:"text-2xl font-bold text-orange-600"},gt={class:"bg-white rounded-lg shadow p-6"},_t={class:"flex items-center justify-between"},vt={class:"text-2xl font-bold text-pink-600"},yt={class:"bg-white rounded-lg shadow p-6"},bt={class:"flex items-center justify-between"},xt={class:"text-3xl font-bold text-cyan-600"},wt={__name:"StatsCards",props:{stats:{type:Object,required:!0}},setup(S){const f=x=>{if(!x||x===0)return"0 Bytes";const h=1024,v=["Bytes","KB","MB","GB"],e=Math.floor(Math.log(x)/Math.log(h));return Math.round(x/Math.pow(h,e)*100)/100+" "+v[e]};return(x,h)=>(k(),M("div",st,[o("div",ot,[o("div",rt,[o("div",null,[h[0]||(h[0]=o("p",{class:"text-gray-600 text-md"},"Contributors",-1)),o("p",nt,B(S.stats.uniqueUsers),1)]),h[1]||(h[1]=o("svg",{class:"w-10 h-10 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1))])]),o("div",at,[o("div",lt,[o("div",null,[h[2]||(h[2]=o("p",{class:"text-gray-500 text-sm"},"Total Files",-1)),o("p",dt,B(S.stats.totalFiles),1)]),h[3]||(h[3]=o("svg",{class:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1))])]),o("div",ut,[o("div",ct,[o("div",null,[h[4]||(h[4]=o("p",{class:"text-gray-500 text-sm"},"Active Days",-1)),o("p",ht,B(S.stats.uniqueDates),1)]),h[5]||(h[5]=o("svg",{class:"w-10 h-10 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1))])]),o("div",mt,[o("div",ft,[o("div",null,[h[6]||(h[6]=o("p",{class:"text-gray-500 text-sm"},"Total Size",-1)),o("p",pt,B(f(S.stats.totalSize)),1)]),h[7]||(h[7]=o("svg",{class:"w-10 h-10 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})],-1))])]),o("div",gt,[o("div",_t,[o("div",null,[h[8]||(h[8]=o("p",{class:"text-gray-500 text-sm"},"Avg File Size",-1)),o("p",vt,B(f(S.stats.avgFileSize)),1)]),h[9]||(h[9]=o("svg",{class:"w-10 h-10 text-pink-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1))])]),o("div",yt,[o("div",bt,[o("div",null,[h[10]||(h[10]=o("p",{class:"text-gray-500 text-sm"},"Geotagged",-1)),o("p",xt,B(S.stats.geotaggedFiles),1)]),h[11]||(h[11]=o("svg",{class:"w-10 h-10 text-cyan-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1))])])]))}};var Ct=ue();const U=ce(Ct);var I={exports:{}},kt=I.exports,ee;function Lt(){return ee||(ee=1,(function(S,f){(function(x,h){h(f)})(kt,function(x){var h=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,i=this._zoom;if(e.__parent)for(;t.__parent._zoom>=i;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}),this):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e}),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var i=this._featureGroup,s=this._nonPointGroup,l=this.options.chunkedLoading,d=this.options.chunkInterval,r=this.options.chunkProgress,n=e.length,a=0,c=!0,u;if(this._map){var g=new Date().getTime(),m=L.bind(function(){var _=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();a<n;a++){if(l&&a%200===0){var p=new Date().getTime()-_;if(p>d)break}if(u=e[a],u instanceof L.LayerGroup){c&&(e=e.slice(),c=!1),this._extractNonGroupLayers(u,e),n=e.length;continue}if(!u.getLatLng){s.addLayer(u),t||this.fire("layeradd",{layer:u});continue}if(!this.hasLayer(u)&&(this._addLayer(u,this._maxZoom),t||this.fire("layeradd",{layer:u}),u.__parent&&u.__parent.getChildCount()===2)){var b=u.__parent.getAllChildMarkers(),y=b[0]===u?b[1]:b[0];i.removeLayer(y)}}r&&r(a,n,new Date().getTime()-g),a===n?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var $=this._needsClustering;a<n;a++){if(u=e[a],u instanceof L.LayerGroup){c&&(e=e.slice(),c=!1),this._extractNonGroupLayers(u,e),n=e.length;continue}if(!u.getLatLng){s.addLayer(u);continue}this.hasLayer(u)||$.push(u)}return this},removeLayers:function(e){var t,i,s=e.length,l=this._featureGroup,d=this._nonPointGroup,r=!0;if(!this._map){for(t=0;t<s;t++){if(i=e[t],i instanceof L.LayerGroup){r&&(e=e.slice(),r=!1),this._extractNonGroupLayers(i,e),s=e.length;continue}this._arraySplice(this._needsClustering,i),d.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i})}return this}if(this._unspiderfy){this._unspiderfy();var n=e.slice(),a=s;for(t=0;t<a;t++){if(i=n[t],i instanceof L.LayerGroup){this._extractNonGroupLayers(i,n),a=n.length;continue}this._unspiderfyLayer(i)}}for(t=0;t<s;t++){if(i=e[t],i instanceof L.LayerGroup){r&&(e=e.slice(),r=!1),this._extractNonGroupLayers(i,e),s=e.length;continue}if(!i.__parent){d.removeLayer(i),this.fire("layerremove",{layer:i});continue}this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),l.hasLayer(i)&&(l.removeLayer(i),i.clusterShow&&i.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var i=this._needsClustering.slice(),s=this._needsRemoving,l,d,r;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),d=i.length-1;d>=0;d--){for(l=!0,r=s.length-1;r>=0;r--)if(s[r].layer===i[d]){l=!1;break}l&&e.call(t,i[d])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(i){L.stamp(i)===e&&(t=i)}),t},hasLayer:function(e){if(!e)return!1;var t,i=this._needsClustering;for(t=i.length-1;t>=0;t--)if(i[t]===e)return!0;for(i=this._needsRemoving,t=i.length-1;t>=0;t--)if(i[t].layer===e)return!1;return!!(e.__parent&&e.__parent._group===this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var i=this._map;typeof t!="function"&&(t=function(){});var s=function(){(i.hasLayer(e)||i.hasLayer(e.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",s,this),this.off("animationend",s,this),i.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",s,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",s,this),this.on("animationend",s,this),e.__parent.zoomToBounds())},onAdd:function(e){this._map=e;var t,i,s;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,i=this._needsRemoving.length;t<i;t++)s=this._needsRemoving[t],s.newlatlng=s.layer._latlng,s.layer._latlng=s.latlng;for(t=0,i=this._needsRemoving.length;t<i;t++)s=this._needsRemoving[t],this._removeLayer(s.layer,!0),s.layer._latlng=s.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t)return e.splice(i,1),!0},_removeFromGridUnclustered:function(e,t){for(var i=this._map,s=this._gridUnclustered,l=Math.floor(this._map.getMinZoom());t>=l&&s[t].removeObject(e,i.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,i){e._latlng=t,this.removeLayer(e),e._latlng=i,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,i){var s=this._gridClusters,l=this._gridUnclustered,d=this._featureGroup,r=this._map,n=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var a=e.__parent,c=a._markers,u;for(this._arraySplice(c,e);a&&(a._childCount--,a._boundsNeedUpdate=!0,!(a._zoom<n));)t&&a._childCount<=1?(u=a._markers[0]===e?a._markers[1]:a._markers[0],s[a._zoom].removeObject(a,r.project(a._cLatLng,a._zoom)),l[a._zoom].addObject(u,r.project(u.getLatLng(),a._zoom)),this._arraySplice(a.__parent._childClusters,a),a.__parent._markers.push(u),u.__parent=a.__parent,a._icon&&(d.removeLayer(a),i||d.addLayer(u))):a._iconNeedsUpdate=!0,a=a.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,i){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,i)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),i=" marker-cluster-";return t<10?i+="small":t<100?i+="medium":i+="large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,s=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom;(t||s||l)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,i=t;if(!(e.type==="clusterkeypress"&&e.originalEvent&&e.originalEvent.keyCode!==13)){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,s=this.options.spiderfyOnEveryZoom,l=this._map;(e||i||s)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),l.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,s=i;typeof i!="function"&&(s=function(){return i}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var l=e;l>=t;l--)this._gridClusters[l]=new L.DistanceGrid(s(l)),this._gridUnclustered[l]=new L.DistanceGrid(s(l));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var i=this._gridClusters,s=this._gridUnclustered,l=Math.floor(this._map.getMinZoom()),d,r;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);t>=l;t--){d=this._map.project(e.getLatLng(),t);var n=i[t].getNearObject(d);if(n){n._addChild(e),e.__parent=n;return}if(n=s[t].getNearObject(d),n){var a=n.__parent;a&&this._removeLayer(n,!1);var c=new this._markerCluster(this,t,n,e);i[t].addObject(c,this._map.project(c._cLatLng,t)),n.__parent=c,e.__parent=c;var u=c;for(r=t-1;r>a._zoom;r--)u=new this._markerCluster(this,r,u),i[r].addObject(u,this._map.project(n.getLatLng(),r));a._addChild(u),this._removeFromGridUnclustered(n,t);return}s[t].addObject(e,d)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var i=t.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var i=e.getLayers(),s=0,l;for(t=t||[];s<i.length;s++){if(l=i[s],l instanceof L.LayerGroup){this._extractNonGroupLayers(l,t);continue}t.push(l)}return t},_overrideMarkerIcon:function(e){var t=e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}});return t}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var i=this._getExpandedVisibleBounds(),s=this._featureGroup,l=Math.floor(this._map.getMinZoom()),d;this._ignoreMove=!0,this._topClusterLevel._recursively(i,e,l,function(r){var n=r._latlng,a=r._markers,c;for(i.contains(n)||(n=null),r._isSingleParent()&&e+1===t?(s.removeLayer(r),r._recursivelyAddChildrenToMap(null,t,i)):(r.clusterHide(),r._recursivelyAddChildrenToMap(n,t,i)),d=a.length-1;d>=0;d--)c=a[d],i.contains(c._latlng)||s.removeLayer(c)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,t),s.eachLayer(function(r){!(r instanceof L.MarkerCluster)&&r._icon&&r.clusterShow()}),this._topClusterLevel._recursively(i,e,t,function(r){r._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,e,l,function(r){s.removeLayer(r),r.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var i=this,s=this._featureGroup;s.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){s.removeLayer(e),e.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,i){var s=this._getExpandedVisibleBounds(),l=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(s,l,t+1,i);var d=this;this._forceLayout(),e._recursivelyBecomeVisible(s,i),this._enqueue(function(){if(e._childCount===1){var r=e._markers[0];this._ignoreMove=!0,r.setLatLng(r.getLatLng()),this._ignoreMove=!1,r.clusterShow&&r.clusterShow()}else e._recursively(s,i,l,function(n){n._recursivelyRemoveChildrenFromMap(s,l,t+1)});d._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var v=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,i,s){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),s&&this._addChild(s)},getAllChildMarkers:function(e,t){e=e||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(e,t);for(var s=this._markers.length-1;s>=0;s--)t&&this._markers[s].__dragStart||e.push(this._markers[s]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t=this._childClusters.slice(),i=this._group._map,s=i.getBoundsZoom(this._bounds),l=this._zoom+1,d=i.getZoom(),r;t.length>0&&s>l;){l++;var n=[];for(r=0;r<t.length;r++)n=n.concat(t[r]._childClusters);t=n}s>l?this._group._map.setView(this._latlng,l):s<=d?this._group._map.setView(this._latlng,d+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e=this._markers,t=this._childClusters,i=0,s=0,l=this._childCount,d,r,n,a;if(l!==0){for(this._resetBounds(),d=0;d<e.length;d++)n=e[d]._latlng,this._bounds.extend(n),i+=n.lat,s+=n.lng;for(d=0;d<t.length;d++)r=t[d],r._boundsNeedUpdate&&r._recalculateBounds(),this._bounds.extend(r._bounds),n=r._wLatLng,a=r._childCount,i+=n.lat*a,s+=n.lng*a;this._latlng=this._wLatLng=new L.LatLng(i/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,i){this._recursively(e,this._group._map.getMinZoom(),i-1,function(s){var l=s._markers,d,r;for(d=l.length-1;d>=0;d--)r=l[d],r._icon&&(r._setPos(t),r.clusterHide())},function(s){var l=s._childClusters,d,r;for(d=l.length-1;d>=0;d--)r=l[d],r._icon&&(r._setPos(t),r.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,i,s){this._recursively(e,s,t,function(l){l._recursivelyAnimateChildrenIn(e,l._group._map.latLngToLayerPoint(l.getLatLng()).round(),i),l._isSingleParent()&&i-1===s?(l.clusterShow(),l._recursivelyRemoveChildrenFromMap(e,t,i)):l.clusterHide(),l._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,i){this._recursively(i,this._group._map.getMinZoom()-1,t,function(s){if(t!==s._zoom)for(var l=s._markers.length-1;l>=0;l--){var d=s._markers[l];i.contains(d._latlng)&&(e&&(d._backupLatlng=d.getLatLng(),d.setLatLng(e),d.clusterHide&&d.clusterHide()),s._group._featureGroup.addLayer(d))}},function(s){s._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var i=this._markers[t];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(e-1===this._zoom)for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s]._restorePosition();else for(var l=this._childClusters.length-1;l>=0;l--)this._childClusters[l]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,i,s){var l,d;this._recursively(e,t-1,i-1,function(r){for(d=r._markers.length-1;d>=0;d--)l=r._markers[d],(!s||!s.contains(l._latlng))&&(r._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())},function(r){for(d=r._childClusters.length-1;d>=0;d--)l=r._childClusters[d],(!s||!s.contains(l._latlng))&&(r._group._featureGroup.removeLayer(l),l.clusterShow&&l.clusterShow())})},_recursively:function(e,t,i,s,l){var d=this._childClusters,r=this._zoom,n,a;if(t<=r&&(s&&s(this),l&&r===i&&l(this)),r<t||r<i)for(n=d.length-1;n>=0;n--)a=d[n],a._boundsNeedUpdate&&a._recalculateBounds(),e.intersects(a._bounds)&&a._recursively(e,t,i,s,l)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var i=this._getCoord(t.x),s=this._getCoord(t.y),l=this._grid,d=l[s]=l[s]||{},r=d[i]=d[i]||[],n=L.Util.stamp(e);this._objectPoint[n]=t,r.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var i=this._getCoord(t.x),s=this._getCoord(t.y),l=this._grid,d=l[s]=l[s]||{},r=d[i]=d[i]||[],n,a;for(delete this._objectPoint[L.Util.stamp(e)],n=0,a=r.length;n<a;n++)if(r[n]===e)return r.splice(n,1),a===1&&delete d[i],!0},eachObject:function(e,t){var i,s,l,d,r,n,a,c=this._grid;for(i in c){r=c[i];for(s in r)for(n=r[s],l=0,d=n.length;l<d;l++)a=e.call(t,n[l]),a&&(l--,d--)}},getNearObject:function(e){var t=this._getCoord(e.x),i=this._getCoord(e.y),s,l,d,r,n,a,c,u,g=this._objectPoint,m=this._sqCellSize,$=null;for(s=i-1;s<=i+1;s++)if(r=this._grid[s],r){for(l=t-1;l<=t+1;l++)if(n=r[l],n)for(d=0,a=n.length;d<a;d++)c=n[d],u=this._sqDist(g[L.Util.stamp(c)],e),(u<m||u<=m&&$===null)&&(m=u,$=c)}return $},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var i=t.x-e.x,s=t.y-e.y;return i*i+s*s}},(function(){L.QuickHull={getDistant:function(e,t){var i=t[1].lat-t[0].lat,s=t[0].lng-t[1].lng;return s*(e.lat-t[0].lat)+i*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var i=0,s=null,l=[],d,r,n;for(d=t.length-1;d>=0;d--){if(r=t[d],n=this.getDistant(r,e),n>0)l.push(r);else continue;n>i&&(i=n,s=r)}return{maxPoint:s,newPoints:l}},buildConvexHull:function(e,t){var i=[],s=this.findMostDistantPointFromBaseLine(e,t);return s.maxPoint?(i=i.concat(this.buildConvexHull([e[0],s.maxPoint],s.newPoints)),i=i.concat(this.buildConvexHull([s.maxPoint,e[1]],s.newPoints)),i):[e[0]]},getConvexHull:function(e){var t=!1,i=!1,s=!1,l=!1,d=null,r=null,n=null,a=null,c=null,u=null,g;for(g=e.length-1;g>=0;g--){var m=e[g];(t===!1||m.lat>t)&&(d=m,t=m.lat),(i===!1||m.lat<i)&&(r=m,i=m.lat),(s===!1||m.lng>s)&&(n=m,s=m.lng),(l===!1||m.lng<l)&&(a=m,l=m.lng)}i!==t?(u=r,c=d):(u=a,c=n);var $=[].concat(this.buildConvexHull([u,c],e),this.buildConvexHull([c,u],e));return $}}})(),L.MarkerCluster.include({getConvexHull:function(){var e=this.getAllChildMarkers(),t=[],i,s;for(s=e.length-1;s>=0;s--)i=e[s].getLatLng(),t.push(i);return L.QuickHull.getConvexHull(t)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var e=this.getAllChildMarkers(null,!0),t=this._group,i=t._map,s=i.latLngToLayerPoint(this._latlng),l;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?l=this._group.options.spiderfyShapePositions(e.length,s):e.length>=this._circleSpiralSwitchover?l=this._generatePointsSpiral(e.length,s):(s.y+=10,l=this._generatePointsCircle(e.length,s)),this._animationSpiderfy(e,l)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e),s=i/this._2PI,l=this._2PI/e,d=[],r,n;for(s=Math.max(s,35),d.length=e,r=0;r<e;r++)n=this._circleStartAngle+r*l,d[r]=new L.Point(t.x+s*Math.cos(n),t.y+s*Math.sin(n))._round();return d},_generatePointsSpiral:function(e,t){var i=this._group.options.spiderfyDistanceMultiplier,s=i*this._spiralLengthStart,l=i*this._spiralFootSeparation,d=i*this._spiralLengthFactor*this._2PI,r=0,n=[],a;for(n.length=e,a=e;a>=0;a--)a<e&&(n[a]=new L.Point(t.x+s*Math.cos(r),t.y+s*Math.sin(r))._round()),r+=l/s+a*5e-4,s+=d/r;return n},_noanimationUnspiderfy:function(){var e=this._group,t=e._map,i=e._featureGroup,s=this.getAllChildMarkers(null,!0),l,d;for(e._ignoreMove=!0,this.setOpacity(1),d=s.length-1;d>=0;d--)l=s[d],i.removeLayer(l),l._preSpiderfyLatlng&&(l.setLatLng(l._preSpiderfyLatlng),delete l._preSpiderfyLatlng),l.setZIndexOffset&&l.setZIndexOffset(0),l._spiderLeg&&(t.removeLayer(l._spiderLeg),delete l._spiderLeg);e.fire("unspiderfied",{cluster:this,markers:s}),e._ignoreMove=!1,e._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var i=this._group,s=i._map,l=i._featureGroup,d=this._group.options.spiderLegPolylineOptions,r,n,a,c;for(i._ignoreMove=!0,r=0;r<e.length;r++)c=s.layerPointToLatLng(t[r]),n=e[r],a=new L.Polyline([this._latlng,c],d),s.addLayer(a),n._spiderLeg=a,n._preSpiderfyLatlng=n._latlng,n.setLatLng(c),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n);this.setOpacity(.3),i._ignoreMove=!1,i.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i=this,s=this._group,l=s._map,d=s._featureGroup,r=this._latlng,n=l.latLngToLayerPoint(r),a=L.Path.SVG,c=L.extend({},this._group.options.spiderLegPolylineOptions),u=c.opacity,g,m,$,_,p,b;for(u===void 0&&(u=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),a?(c.opacity=0,c.className=(c.className||"")+" leaflet-cluster-spider-leg"):c.opacity=u,s._ignoreMove=!0,g=0;g<e.length;g++)m=e[g],b=l.layerPointToLatLng(t[g]),$=new L.Polyline([r,b],c),l.addLayer($),m._spiderLeg=$,a&&(_=$._path,p=_.getTotalLength()+.1,_.style.strokeDasharray=p,_.style.strokeDashoffset=p),m.setZIndexOffset&&m.setZIndexOffset(1e6),m.clusterHide&&m.clusterHide(),d.addLayer(m),m._setPos&&m._setPos(n);for(s._forceLayout(),s._animationStart(),g=e.length-1;g>=0;g--)b=l.layerPointToLatLng(t[g]),m=e[g],m._preSpiderfyLatlng=m._latlng,m.setLatLng(b),m.clusterShow&&m.clusterShow(),a&&($=m._spiderLeg,_=$._path,_.style.strokeDashoffset=0,$.setStyle({opacity:u}));this.setOpacity(.3),s._ignoreMove=!1,setTimeout(function(){s._animationEnd(),s.fire("spiderfied",{cluster:i,markers:e})},200)},_animationUnspiderfy:function(e){var t=this,i=this._group,s=i._map,l=i._featureGroup,d=e?s._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):s.latLngToLayerPoint(this._latlng),r=this.getAllChildMarkers(null,!0),n=L.Path.SVG,a,c,u,g,m,$;for(i._ignoreMove=!0,i._animationStart(),this.setOpacity(1),c=r.length-1;c>=0;c--)a=r[c],a._preSpiderfyLatlng&&(a.closePopup(),a.setLatLng(a._preSpiderfyLatlng),delete a._preSpiderfyLatlng,$=!0,a._setPos&&(a._setPos(d),$=!1),a.clusterHide&&(a.clusterHide(),$=!1),$&&l.removeLayer(a),n&&(u=a._spiderLeg,g=u._path,m=g.getTotalLength()+.1,g.style.strokeDashoffset=m,u.setStyle({opacity:0})));i._ignoreMove=!1,setTimeout(function(){var _=0;for(c=r.length-1;c>=0;c--)a=r[c],a._spiderLeg&&_++;for(c=r.length-1;c>=0;c--)a=r[c],a._spiderLeg&&(a.clusterShow&&a.clusterShow(),a.setZIndexOffset&&a.setZIndexOffset(0),_>1&&l.removeLayer(a),s.removeLayer(a._spiderLeg),delete a._spiderLeg);i._animationEnd(),i.fire("unspiderfied",{cluster:t,markers:r})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,i;for(t in e)for(i=e[t].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,i;for(t in e)i=e[t],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(e,t){var i=this.options.icon;return L.setOptions(i,e),this.setIcon(i),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),x.MarkerClusterGroup=h,x.MarkerCluster=v,Object.defineProperty(x,"__esModule",{value:!0})})})(I,I.exports)),I.exports}Lt();const Mt={class:"bg-white rounded-lg shadow p-6 mb-8"},St={class:"flex items-center justify-between mb-4"},$t={class:"text-gray-600"},Bt={class:"flex items-center space-x-3"},Pt={class:"text-sm text-gray-500"},zt={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4"},Ot={__name:"PhotoMap",props:{geoData:{type:Array,required:!0}},setup(S){const f=S,x=P(null);let h=null,v=null,e=[];const t=P(!0),i=P(0),s=()=>{if(!x.value||f.geoData.length===0)return;h&&(h.remove(),h=null);const r=f.geoData.filter(u=>u.lat&&u.lon);if(r.length===0)return;const n=r.reduce((u,g)=>u+g.lat,0)/r.length,a=r.reduce((u,g)=>u+g.lon,0)/r.length;h=U.map(x.value).setView([n,a],8),U.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors",maxZoom:19}).addTo(h);const c=U.divIcon({className:"custom-location-marker",html:`
      <div style="position: relative; width: 20px; height: 20px;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#EF4444" stroke="#DC2626" stroke-width="0.5"/>
          <circle cx="12" cy="9" r="1.5" fill="white"/>
        </svg>
      </div>
    `,iconSize:[20,20],iconAnchor:[10,20],popupAnchor:[0,-20]});if(v=U.markerClusterGroup({chunkedLoading:!0,chunkInterval:200,chunkDelay:50,maxClusterRadius:60,disableClusteringAtZoom:15,animate:!0,animateAddingMarkers:!0,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,iconCreateFunction:function(u){const g=u.getChildCount();let m="cluster-small";return g<10?m="cluster-small":g<50?m="cluster-medium":m="cluster-large",U.divIcon({html:`
          <div class="custom-cluster-marker ${m}">
            <div class="cluster-inner">
              <span class="cluster-count">${g}</span>
            </div>
          </div>
        `,className:"custom-cluster-container",iconSize:U.point(40,40),iconAnchor:[20,20]})}}),e=[],r.forEach(u=>{const g=U.marker([u.lat,u.lon],{icon:c}),m=`
      <div style="min-width: 200px;">
        <img src="${u.thumbnail}" alt="${u.filename}" style="width: 100%; max-width: 300px; height: auto; border-radius: 4px; margin-bottom: 8px;" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22150%22%3E%3Crect fill=%22%23ddd%22 width=%22200%22 height=%22150%22/%3E%3Ctext fill=%22%23999%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22%3ENo thumbnail%3C/text%3E%3C/svg%3E'" />
        <div style="font-weight: 600; margin-bottom: 4px; word-break: break-word;">${u.filename}</div>
        <div style="font-size: 12px; color: #666; margin-bottom: 4px;">By: <a href="https://commons.wikimedia.org/wiki/User:${encodeURIComponent(u.author)}" target="_blank" rel="noopener noreferrer" style="color: #3B82F6; text-decoration: none; font-weight: 500;">${u.author}</a></div>
        <div style="font-size: 12px; color: #666; margin-bottom: 8px;">Date: ${u.date}</div>
        <a href="${u.commonsUrl}" target="_blank" rel="noopener noreferrer" style="display: inline-block; background-color: #3B82F6; color: white; padding: 6px 12px; border-radius: 4px; text-decoration: none; font-size: 12px; font-weight: 500;">View on Commons</a>
      </div>
    `;g.bindPopup(m,{maxWidth:350}),v.addLayer(g),e.push(g)}),t.value?h.addLayer(v):e.forEach(u=>u.addTo(h)),l(),r.length>0){const u=U.latLngBounds(r.map(g=>[g.lat,g.lon]));h.fitBounds(u,{padding:[50,50]})}v&&(v.on("clustermouseover",l),v.on("clusterclick",l),h.on("zoomend",l))},l=()=>{if(v&&t.value){v.eachLayer(n=>{n instanceof U.MarkerCluster});let r=0;h.eachLayer(n=>{n._group===v&&n._icon&&r++}),i.value=r}else i.value=e.length},d=()=>{!h||!v||(t.value=!t.value,t.value?(e.forEach(r=>{h.hasLayer(r)&&h.removeLayer(r)}),h.addLayer(v)):(h.hasLayer(v)&&h.removeLayer(v),e.forEach(r=>r.addTo(h))),l())};return N(()=>{f.geoData.length>0&&s()}),Q(()=>f.geoData,r=>{r.length>0&&s()},{deep:!0}),ie(()=>{h&&(h.remove(),h=null),v=null,e=[]}),(r,n)=>(k(),M("div",Mt,[o("div",St,[o("div",null,[n[0]||(n[0]=o("h2",{class:"text-xl font-bold text-gray-800 mb-1"},"Photo Locations Map",-1)),o("p",$t,B(S.geoData.length)+" photos with geolocation data. Click on markers to view photo details. ",1)]),o("div",Bt,[o("div",Pt,[n[1]||(n[1]=o("span",{class:"font-medium"},"Clusters:",-1)),Z(" "+B(i.value),1)]),o("button",{onClick:d,class:T(["px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200",t.value?"bg-wikimedia-blue text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},B(t.value?"Clustering ON":"Clustering OFF"),3)])]),t.value?(k(),M("div",zt,[...n[2]||(n[2]=[o("div",{class:"flex items-center text-sm text-blue-800"},[o("svg",{class:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),o("span",null," Markers are grouped into clusters. Zoom in or click on clusters to expand them and see individual photos. ")],-1)])])):D("",!0),o("div",{ref_key:"mapContainer",ref:x,class:"h-[500px] w-full rounded-lg border border-gray-300"},null,512)]))}},Dt=K(Ot,[["__scopeId","data-v-9302709c"]]);E.register(...he);const Ut={class:"bg-white rounded-lg shadow p-6 mb-8"},Et={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},At={class:"bg-white rounded-lg shadow p-6"},jt={class:"bg-white rounded-lg shadow p-6"},It={class:"bg-white rounded-lg shadow p-6 mb-8"},Tt={class:"flex justify-center"},Ft={class:"w-full max-w-2xl"},Gt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Zt={class:"bg-white rounded-lg shadow p-6"},Nt={class:"bg-white rounded-lg shadow p-6"},Rt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Vt={class:"bg-white rounded-lg shadow p-6"},Ht={class:"bg-white rounded-lg shadow p-6"},qt={__name:"DashboardCharts",props:{data:{type:Object,required:!0}},setup(S){const f=S,x=P(null),h=P(null),v=P(null),e=P(null),t=P(null),i=P(null),s=P(null),l=P(null);let d={};const r=()=>{if(Object.values(d).forEach(n=>n.destroy()),d={},x.value&&f.data.dailyUploads&&(d.daily=new E(x.value,{type:"line",data:{labels:f.data.dailyUploads.map(n=>n.date),datasets:[{label:"Uploads",data:f.data.dailyUploads.map(n=>n.uploads),borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!0}}}})),h.value&&f.data.userContributions){const n=f.data.userContributions.slice(0,10);d.userBar=new E(h.value,{type:"bar",data:{labels:n.map(a=>a.name),datasets:[{label:"Files",data:n.map(a=>a.files),backgroundColor:"#10B981"}]},options:{responsive:!0,maintainAspectRatio:!0,indexAxis:"y"}})}if(v.value&&f.data.userContributions){const n=f.data.userContributions.slice(0,8);d.userPie=new E(v.value,{type:"pie",data:{labels:n.map(a=>a.name),datasets:[{data:n.map(a=>a.files),backgroundColor:["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658","#FF6B9D"]}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"right",labels:{generateLabels:function(a){const c=a.data;return c.labels.length&&c.datasets.length?c.labels.map((u,g)=>{const m=c.datasets[0];return{text:`${u} (${m.data[g]})`,fillStyle:m.backgroundColor[g],strokeStyle:m.backgroundColor[g],lineWidth:1,hidden:!1,index:g}}):[]}}}}}})}if(e.value&&f.data.sizeDistribution&&(d.size=new E(e.value,{type:"bar",data:{labels:f.data.sizeDistribution.map(n=>n.range),datasets:[{label:"Files",data:f.data.sizeDistribution.map(n=>n.count),backgroundColor:"#F59E0B"}]},options:{responsive:!0,maintainAspectRatio:!0}})),i.value&&f.data.dailyUploads){const n=[...f.data.dailyUploads].sort((a,c)=>c.uploads-a.uploads).slice(0,10);d.topDays=new E(i.value,{type:"bar",data:{labels:n.map(a=>a.date),datasets:[{label:"Uploads",data:n.map(a=>a.uploads),backgroundColor:"#EF4444"}]},options:{responsive:!0,maintainAspectRatio:!0,indexAxis:"y",plugins:{title:{display:!0,text:"Days with Most Activity"}}}})}s.value&&f.data.hourlyDistribution&&(d.hourly=new E(s.value,{type:"bar",data:{labels:f.data.hourlyDistribution.map(n=>`${n.hour}:00`),datasets:[{label:"Uploads",data:f.data.hourlyDistribution.map(n=>n.count),backgroundColor:"#8B5CF6"}]},options:{responsive:!0,maintainAspectRatio:!0}})),l.value&&f.data.monthlyActivity&&(d.monthly=new E(l.value,{type:"line",data:{labels:f.data.monthlyActivity.map(n=>n.month),datasets:[{label:"Uploads",data:f.data.monthlyActivity.map(n=>n.count),borderColor:"#06B6D4",backgroundColor:"rgba(6, 182, 212, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!0}})),t.value&&f.data.cameraData&&(d.camera=new E(t.value,{type:"bar",data:{labels:f.data.cameraData.map(n=>n.model),datasets:[{label:"Photos",data:f.data.cameraData.map(n=>n.count),backgroundColor:"#8B5CF6"}]},options:{responsive:!0,maintainAspectRatio:!0,indexAxis:"y"}}))};return N(()=>{f.data&&r()}),Q(()=>f.data,n=>{n&&r()},{deep:!0}),ie(()=>{Object.values(d).forEach(n=>n.destroy()),d={}}),(n,a)=>(k(),M("div",null,[o("div",Ut,[a[0]||(a[0]=o("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Daily Upload Activity",-1)),o("canvas",{ref_key:"dailyChart",ref:x},null,512)]),o("div",Et,[o("div",At,[a[1]||(a[1]=o("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Top Contributors (Files)",-1)),o("canvas",{ref_key:"userBarChart",ref:h},null,512)]),o("div",jt,[a[2]||(a[2]=o("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Top Camera Models",-1)),o("canvas",{ref_key:"cameraChart",ref:t},null,512)])]),o("div",It,[a[3]||(a[3]=o("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Contribution Distribution",-1)),o("div",Tt,[o("div",Ft,[o("canvas",{ref_key:"userPieChart",ref:v},null,512)])])]),o("div",Gt,[o("div",Zt,[a[4]||(a[4]=o("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"File Size Distribution",-1)),o("canvas",{ref_key:"sizeChart",ref:e},null,512)]),o("div",Nt,[a[5]||(a[5]=o("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Top Upload Days",-1)),o("canvas",{ref_key:"topDaysChart",ref:i},null,512)])]),o("div",Rt,[o("div",Vt,[a[6]||(a[6]=o("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Upload Hours Distribution",-1)),o("canvas",{ref_key:"hourlyChart",ref:s},null,512)]),o("div",Ht,[a[7]||(a[7]=o("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Monthly Activity",-1)),o("canvas",{ref_key:"monthlyChart",ref:l},null,512)])])]))}},Wt={class:"bg-white rounded-lg shadow p-6"},Qt={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4"},Kt={class:"flex items-center gap-3"},Jt={class:"overflow-x-auto"},Xt={class:"min-w-full divide-y divide-gray-200"},Yt={class:"bg-white divide-y divide-gray-200"},ei={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ti={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ii=["href","title"],si={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},oi={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ri={__name:"ContributorsTable",props:{userContributions:{type:Array,required:!0}},setup(S){const f=S,x=P(""),h=P("files"),v=P("desc"),e=()=>{v.value=v.value==="desc"?"asc":"desc"},t=r=>`https://commons.wikimedia.org/wiki/User:${encodeURIComponent(r.trim())}`,i=ae(()=>{const r=x.value.toLowerCase();let n=(f.userContributions||[]).filter(u=>!r||(u.name||"").toLowerCase().includes(r));const a=h.value,c=v.value==="desc"?-1:1;return n=n.slice().sort((u,g)=>{let m=u[a],$=g[a];return a==="sizeMB"&&(m=parseFloat(m),$=parseFloat($)),typeof m=="string"&&(m=m.toLowerCase()),typeof $=="string"&&($=$.toLowerCase()),m<$?-1*c:m>$?1*c:0}),n}),s=(r,n,a="text/plain")=>{const c=new Blob([n],{type:`${a};charset=utf-8`}),u=URL.createObjectURL(c),g=document.createElement("a");g.href=u,g.download=r,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(u)},l=()=>{const n=[["Rank","Username","Files Uploaded","Total Size (MB)"].join(",")];i.value.forEach((a,c)=>{const u=[c+1,a.name,a.files,a.sizeMB];n.push(u.map(g=>typeof g=="string"&&g.includes(",")?`"${g.replace(/"/g,'""')}"`:g).join(","))}),s("contributors.csv",n.join(`
`),"text/csv")},d=()=>{const r=[];r.push('{| class="wikitable sortable"'),r.push("|+ Contributors"),r.push("! Rank !! Username !! Files Uploaded !! Total Size (MB)"),i.value.forEach((a,c)=>{const u=`[[User:${a.name}|${a.name}]]`;r.push("|-"),r.push(`| ${c+1} || ${u} || ${a.files} || ${a.sizeMB}`)}),r.push("|}");const n=r.join(`
`);navigator.clipboard?.writeText(n).catch(()=>{}),s("contributors-wikitable.txt",n,"text/plain")};return(r,n)=>(k(),M("div",Wt,[o("div",Qt,[n[4]||(n[4]=o("h2",{class:"text-xl font-bold text-gray-800"},"Detailed User Contributions",-1)),o("div",Kt,[H(o("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>x.value=a),type:"search",placeholder:"Search userâ€¦",class:"w-56 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wikimedia-blue/30 focus:border-wikimedia-blue"},null,512),[[te,x.value,void 0,{trim:!0}]]),H(o("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>h.value=a),class:"px-3 py-2 text-sm border border-gray-300 rounded-lg"},[...n[2]||(n[2]=[o("option",{value:"files"},"Sort by Files",-1),o("option",{value:"sizeMB"},"Sort by Size",-1),o("option",{value:"name"},"Sort by Name",-1)])],512),[[le,h.value]]),o("button",{onClick:e,class:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50"},B(v.value==="desc"?"Desc":"Asc"),1),n[3]||(n[3]=o("div",{class:"h-6 w-px bg-gray-200"},null,-1)),o("button",{onClick:l,class:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50"},"Export CSV"),o("button",{onClick:d,class:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50"},"Copy Wikitable")])]),o("div",Jt,[o("table",Xt,[n[5]||(n[5]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rank"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Username"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Files Uploaded"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Size (MB)")])],-1)),o("tbody",Yt,[(k(!0),M(q,null,W(i.value,(a,c)=>(k(),M("tr",{key:a.name,class:"hover:bg-gray-50"},[o("td",ei,B(c+1),1),o("td",ti,[o("a",{href:t(a.name),target:"_blank",rel:"noopener noreferrer",class:"text-wikimedia-blue hover:text-wikimedia-green transition-colors duration-200 font-medium hover:underline",title:`View ${a.name}'s user page on Wikimedia Commons`},B(a.name),9,ii)]),o("td",si,B(a.files),1),o("td",oi,B(a.sizeMB),1)]))),128))])])])]))}},ni={},ai={class:"bg-white border-t border-gray-200"},li={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},di={class:"mt-6 pt-6 border-t border-gray-200 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ui={class:"text-xs text-gray-500"};function ci(S,f){return k(),M("footer",ai,[o("div",li,[f[1]||(f[1]=A('<div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-gradient-to-br from-wikimedia-blue to-wikimedia-green flex items-center justify-center"><svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"></path></svg></div><div><p class="text-sm font-semibold text-gray-900">Commons Analytics</p><p class="text-xs text-gray-500">Wikimedia Commons Dashboard</p></div></div><div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm"><a href="#" class="text-gray-600 hover:text-wikimedia-blue">About</a><a href="#" class="text-gray-600 hover:text-wikimedia-blue">Documentation</a><a href="https://commons.wikimedia.org" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-wikimedia-blue">Commons</a><a href="https://github.com/ranjithsiji/mist-commons" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-wikimedia-blue">GitHub</a></div></div>',1)),o("div",di,[o("p",ui,"Â© "+B(new Date().getFullYear())+" Commons Analytics. Built with Vue.js and TailwindCSS.",1),f[0]||(f[0]=o("div",{class:"flex items-center gap-4 text-xs text-gray-500"},[o("span",null,"Open Source"),o("span",null,"Community Driven"),o("span",null,"Global Impact")],-1))])])])}const hi=K(ni,[["render",ci]]),V="/api",mi="60000";function fi(){const S=P(!1),f=P(""),x=async(t,i={})=>{const s=new AbortController,l=setTimeout(()=>s.abort(),mi);try{const d=await fetch(t,{...i,signal:s.signal,headers:{"Content-Type":"application/json",...i.headers}});return clearTimeout(l),d}catch(d){throw clearTimeout(l),d.name==="AbortError"?new Error("Request timeout - server may be unavailable"):d}};return{loading:S,error:f,fetchCategories:async()=>{S.value=!0,f.value="";try{console.log("Fetching categories from:",`${V}/categories.php`);const t=await x(`${V}/categories.php`);if(!t.ok){const s=await t.text();throw new Error(`HTTP ${t.status}: ${t.statusText}${s?` - ${s}`:""}`)}const i=await t.json();if(console.log("Categories response:",i),!i.success)throw new Error(i.error||"API returned success: false");return i.categories||[]}catch(t){const i=`Failed to load categories: ${t.message}`;throw f.value=i,console.error("Categories fetch error:",t),new Error(i)}finally{S.value=!1}},fetchDashboardData:async(t,i=!1)=>{if(!t)throw new Error("Category name is required");S.value=!0,f.value="";try{const s=new URLSearchParams({category:t});i&&s.append("custom","1");const l=`${V}/dashboard.php?${s.toString()}`;console.log("Fetching dashboard data from:",l);const d=await x(l);if(!d.ok){const n=await d.text();throw new Error(`HTTP ${d.status}: ${d.statusText}${n?` - ${n}`:""}`)}const r=await d.json();if(console.log("Dashboard response:",r),!r.success)throw new Error(r.error||"Failed to fetch dashboard data");return r}catch(s){const l=`Failed to load dashboard data: ${s.message}`;throw f.value=l,console.error("Dashboard fetch error:",s),new Error(l)}finally{S.value=!1}},validateCategory:async t=>{try{const i="https://commons.wikimedia.org/w/api.php";let s=t;s.startsWith("Category:")||(s=`Category:${t}`);const l=new URLSearchParams({action:"query",format:"json",origin:"*",titles:s,prop:"categoryinfo|info",formatversion:"2"}),r=await(await fetch(`${i}?${l}`)).json();if(r.query&&r.query.pages&&r.query.pages.length>0){const n=r.query.pages[0];return{exists:!n.missing,pageCount:n.categoryinfo?n.categoryinfo.pages:0,title:n.title}}return{exists:!1,pageCount:0,title:s}}catch(i){return console.error("Category validation error:",i),{exists:!1,pageCount:0,title:t,error:i.message}}}}}function pi(){return{processData:f=>{const x=f.rows||[],h=new Set(x.map(_=>_[7])).size,v=x.length,e=new Set(x.map(_=>_[3])).size,t=x.reduce((_,p)=>_+(parseInt(p[5])||0),0),i=[];x.forEach(_=>{try{const p=JSON.parse(_[6]),b=p?.data?.GPSLatitude,y=p?.data?.GPSLongitude;if(b&&y&&!isNaN(b)&&!isNaN(y)){const C=_[2],w=_[3],z=w?`${w.slice(0,4)}-${w.slice(4,6)}-${w.slice(6,8)}`:"Unknown";i.push({lat:parseFloat(b),lon:parseFloat(y),filename:C,author:_[7]||"Unknown",date:z,thumbnail:`https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(C)}?width=300`,commonsUrl:`https://commons.wikimedia.org/wiki/File:${encodeURIComponent(C)}`})}}catch(p){console.error("Error processing row:",p)}});const s={};x.forEach(_=>{const p=_[7];s[p]||(s[p]={count:0,size:0}),s[p].count++,s[p].size+=parseInt(_[5])||0});const l=Object.entries(s).map(([_,p])=>({name:_,files:p.count,sizeMB:(p.size/(1024*1024)).toFixed(2)})).sort((_,p)=>p.files-_.files),d={};x.forEach(_=>{const p=_[3];if(p){const b=`${p.slice(0,4)}-${p.slice(4,6)}-${p.slice(6,8)}`;d[b]=(d[b]||0)+1}});const r=Object.entries(d).map(([_,p])=>({date:_,uploads:p})).sort((_,p)=>_.date.localeCompare(p.date)),n=Array.from({length:24},(_,p)=>({hour:p,count:0}));x.forEach(_=>{const p=_[4];if(p&&p.length>=10)try{const b=parseInt(p.slice(8,10));b>=0&&b<=23&&n[b].count++}catch{}});const a={};x.forEach(_=>{const p=_[3];if(p&&p.length>=6){const b=`${p.slice(0,4)}-${p.slice(4,6)}`;a[b]=(a[b]||0)+1}});const c=Object.entries(a).map(([_,p])=>({month:_,count:p})).sort((_,p)=>_.month.localeCompare(p.month)),u={"0-1 MB":0,"1-2 MB":0,"2-5 MB":0,"5-10 MB":0,"10+ MB":0};x.forEach(_=>{const p=(parseInt(_[5])||0)/1048576;p<1?u["0-1 MB"]++:p<2?u["1-2 MB"]++:p<5?u["2-5 MB"]++:p<10?u["5-10 MB"]++:u["10+ MB"]++});const g=Object.entries(u).map(([_,p])=>({range:_,count:p})),m={};x.forEach(_=>{try{const b=JSON.parse(_[6])?.data?.Model;b&&(m[b]=(m[b]||0)+1)}catch{}});const $=Object.entries(m).map(([_,p])=>({model:_,count:p})).sort((_,p)=>p.count-_.count).slice(0,10);return{stats:{uniqueUsers:h,totalFiles:v,uniqueDates:e,totalSize:t,avgFileSize:t/v,geotaggedFiles:i.length},data:{userContributions:l,dailyUploads:r,hourlyDistribution:n,monthlyActivity:c,sizeDistribution:g,cameraData:$},geoData:i}}}}const gi={class:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex flex-col"},_i={key:1,class:"flex-1 bg-gradient-to-br from-blue-50 to-green-50 flex flex-col"},vi={class:"bg-white/90 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50"},yi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},bi={class:"flex justify-between items-center h-16"},xi={class:"flex items-center space-x-4"},wi={class:"text-xl font-bold text-gray-900"},Ci={class:"text-sm text-gray-500 hidden sm:block"},ki={class:"flex items-center space-x-4"},Li=["disabled"],Mi={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Si={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$i={class:"md:hidden"},Bi={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pi={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},zi={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},Oi={key:0,class:"md:hidden border-t border-gray-200 py-4"},Di={class:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full"},Ui={class:"mb-8 animate-fade-in"},Ei={class:"text-3xl md:text-4xl font-bold text-gray-900 mb-3"},Ai={key:0,class:"mt-4"},ji={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},Ii={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 15.5c-.77.833.192 2.5 1.732 2.5z"},Ti={key:0,class:"bg-red-50 border-l-4 border-red-400 text-red-700 p-6 rounded-xl mb-8 shadow-lg animate-slide-up"},Fi={class:"flex items-center"},Gi={class:"text-sm mt-1"},Zi={key:0,class:"text-sm mt-2"},Ni={key:1,class:"text-center py-24 animate-fade-in"},Ri={class:"text-gray-600 mb-2"},Vi={key:2,class:"space-y-8 animate-slide-up"},Hi={__name:"App",setup(S){const{loading:f,error:x,fetchCategories:h,fetchDashboardData:v,validateCategory:e}=fi(),{processData:t}=pi(),i=P([]),s=P(null),l=P(null),d=P(null),r=P([]),n=P(!1),a=P(!1),c=P(null),u=async()=>{n.value=!0;try{const C=await h();i.value=C}catch(C){console.error("Error loading categories:",C)}finally{n.value=!1}},g=C=>{s.value=C,c.value=null,a.value=!1,_(C.slug),b(C.categoryName,!1)},m=async C=>{s.value=C,a.value=!1,_(C.slug);try{c.value=await e(C.categoryName),console.log("Category validation:",c.value)}catch(w){console.error("Category validation error:",w),c.value={exists:!1,error:w.message}}b(C.name,!0)},$=()=>{s.value=null,l.value=null,d.value=null,r.value=[],c.value=null,a.value=!1,_("")},_=C=>{const w=C?`?category=${C}`:window.location.pathname;window.history.pushState({},"",w)},p=()=>{const w=new URLSearchParams(window.location.search).get("category");if(w&&i.value.length>0){const z=i.value.find(O=>O.slug===w);z&&g(z)}},b=async(C,w=!1)=>{try{const z=await v(C,w),O=t(z);d.value=O.stats,l.value=O.data,r.value=O.geoData}catch(z){console.error("Error fetching data:",z)}},y=()=>{s.value&&b(s.value.categoryName,s.value.isCustom)};return N(()=>{u()}),Q(i,()=>{i.value.length>0&&p()}),(C,w)=>(k(),M("div",gi,[s.value?(k(),M("div",_i,[o("header",vi,[o("div",yi,[o("div",bi,[o("div",xi,[o("button",{onClick:$,class:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-wikimedia-blue to-wikimedia-green rounded-lg hover:shadow-lg transition-all duration-200",title:"Back to Categories"},[...w[1]||(w[1]=[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),o("div",null,[o("h1",wi,B(s.value.categoryName),1),o("p",Ci,B(s.value.isCustom?"Custom Category Analytics":"Analytics Dashboard"),1)])]),o("div",ki,[w[4]||(w[4]=A('<nav class="hidden md:flex items-center space-x-6"><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200">Overview</a><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200">Statistics</a><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200">Contributors</a><a href="https://commons.wikimedia.org" target="_blank" rel="noopener noreferrer" class="text-gray-700 hover:text-wikimedia-blue font-medium transition-colors duration-200">Commons</a></nav>',1)),o("button",{onClick:y,disabled:j(f),class:"px-4 py-2 bg-gradient-to-r from-wikimedia-blue to-wikimedia-green text-white rounded-lg hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center text-sm font-medium"},[j(f)?(k(),M("svg",Mi,[...w[2]||(w[2]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(k(),M("svg",Si,[...w[3]||(w[3]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),Z(" "+B(j(f)?"Refreshing...":"Refresh"),1)],8,Li),o("div",$i,[o("button",{onClick:w[0]||(w[0]=z=>a.value=!a.value),class:"text-gray-700 hover:text-wikimedia-blue p-2"},[(k(),M("svg",Bi,[a.value?(k(),M("path",zi)):(k(),M("path",Pi))]))])])])]),a.value?(k(),M("div",Oi,[...w[5]||(w[5]=[A('<nav class="flex flex-col space-y-2"><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200">Overview</a><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200">Statistics</a><a href="#" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200">Contributors</a><a href="https://commons.wikimedia.org" target="_blank" rel="noopener noreferrer" class="text-gray-700 hover:text-wikimedia-blue font-medium py-2 transition-colors duration-200">Commons</a></nav>',1)])])):D("",!0)])]),o("main",Di,[o("div",Ui,[o("h2",Ei,B(s.value.categoryName)+" Analytics ",1),w[6]||(w[6]=o("p",{class:"text-lg text-gray-600 leading-relaxed max-w-4xl"},[o("a",{href:"https://commons.wikimedia.org/wiki/Category:{{ selectedCategory.slug }}",target:"_blank",rel:"noopener noreferrer",class:"text-wikimedia-blue hover:text-wikimedia-green transition-colors duration-200"}," View Category on Wikimedia Commons ")],-1)),s.value.isCustom&&c.value?(k(),M("div",Ai,[o("div",{class:T(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",c.value.exists?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},[(k(),M("svg",{class:T(["w-4 h-4 mr-2",c.value.exists?"text-green-600":"text-yellow-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c.value.exists?(k(),M("path",ji)):(k(),M("path",Ii))],2)),Z(" "+B(c.value.exists?`Valid category with ${c.value.pageCount} pages`:"Category not found on Commons"),1)],2)])):D("",!0)]),j(x)?(k(),M("div",Ti,[o("div",Fi,[w[9]||(w[9]=o("svg",{class:"w-6 h-6 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),o("div",null,[w[8]||(w[8]=o("h3",{class:"font-medium"},"Error Loading Data",-1)),o("p",Gi,B(j(x)),1),s.value.isCustom&&!c.value?.exists?(k(),M("div",Zi,[...w[7]||(w[7]=[o("p",null,"This category may not exist on Wikimedia Commons.",-1),o("p",null,"Please check the category name and try again.",-1)])])):D("",!0)])])])):D("",!0),j(f)&&!l.value?(k(),M("div",Ni,[w[10]||(w[10]=o("div",{class:"relative inline-block mb-8"},[o("div",{class:"w-20 h-20 border-4 border-wikimedia-blue/20 border-t-wikimedia-blue rounded-full animate-spin"}),o("div",{class:"absolute inset-0 w-20 h-20 border-4 border-transparent border-r-wikimedia-green rounded-full animate-spin",style:{"animation-delay":"-0.5s","animation-direction":"reverse"}})],-1)),w[11]||(w[11]=o("h3",{class:"text-2xl font-semibold text-gray-700 mb-4"},"Loading Dashboard Data",-1)),o("p",Ri,B(s.value.isCustom?"Analyzing custom category from Wikimedia Commons...":"Fetching analytics from Wikimedia Commons..."),1),w[12]||(w[12]=o("div",{class:"flex justify-center items-center space-x-2 text-sm text-gray-500"},[o("div",{class:"w-2 h-2 bg-wikimedia-blue rounded-full animate-bounce"}),o("div",{class:"w-2 h-2 bg-wikimedia-green rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),o("div",{class:"w-2 h-2 bg-wikimedia-orange rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})],-1))])):D("",!0),l.value&&d.value?(k(),M("div",Vi,[G(wt,{stats:d.value},null,8,["stats"]),r.value.length>0?(k(),Y(Dt,{key:0,"geo-data":r.value},null,8,["geo-data"])):D("",!0),G(qt,{data:l.value},null,8,["data"]),G(ri,{"user-contributions":l.value.userContributions},null,8,["user-contributions"])])):D("",!0)])])):(k(),Y(it,{key:0,categories:i.value,loading:n.value,error:j(x),onSelect:g,onCustom:m},null,8,["categories","loading","error"])),G(hi)]))}},J=de(Hi);J.config.errorHandler=(S,f,x)=>{console.error("Global error:",S),console.error("Error info:",x),console.error("Component:",f)};J.config.warnHandler=(S,f,x)=>{console.warn("Warning:",S),console.warn("Trace:",x)};J.mount("#app");console.log("Wikimedia Commons Dashboard initialized");console.log("Environment:","production");
